"use strict";(self["webpackChunkCompanyName"]=self["webpackChunkCompanyName"]||[]).push([[628],{98628:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var s=o(34182);const l={class:"layout"},a={key:0,class:"row justify-center q-ma-lg"},r=(0,s.Wm)("span",{class:"text-weight-bold"},"Восстановление пароля",-1),i={class:"q-gutter-md q-mt-md"},n={class:"row wrap justify-center items-start content-start q-gutter-md",style:{"margin-left":"0"}},m=(0,s.Uk)("ok"),u=(0,s.Uk)(" Пароль успешно изменен "),c=(0,s.Uk)(" Ссылка уже неактивна. Возможные причины:"),p=(0,s.Wm)("br",null,null,-1),d=(0,s.Wm)("br",null,null,-1),h=(0,s.Uk)(" Вы уже успешно поменяли пароль"),w=(0,s.Wm)("br",null,null,-1),g=(0,s.Uk)(" Истекло время в течении, которого можно было воспользоваться этой ссылкой ");function k(e,t,o,k,b,y){const q=(0,s.up)("q-toolbar-title"),f=(0,s.up)("q-toolbar"),W=(0,s.up)("q-icon"),_=(0,s.up)("q-input"),v=(0,s.up)("q-btn"),F=(0,s.up)("q-card"),U=(0,s.up)("q-banner");return(0,s.wg)(),(0,s.j4)("div",l,[b.isShowForm&&!b.isSuccess?((0,s.wg)(),(0,s.j4)("div",a,[(0,s.Wm)(F,{class:"col-md-4 col-xs-12 q-pa-lg",style:{"min-width":"35%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(q,null,{default:(0,s.w5)((()=>[r])),_:1})])),_:1}),(0,s.Wm)("div",i,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(b.flds,(e=>((0,s.wg)(),(0,s.j4)(_,{key:e.model,outlined:"",type:e.type,label:e.label,modelValue:b.regForm[e.model],"onUpdate:modelValue":t=>b.regForm[e.model]=t},{prepend:(0,s.w5)((()=>[(0,s.Wm)(W,{name:e.icon},null,8,["name"])])),_:2},1032,["type","label","modelValue","onUpdate:modelValue"])))),128)),(0,s.Wm)("div",n,[(0,s.Wm)(v,{class:"col",color:"primary",onClick:y.changePassword},{default:(0,s.w5)((()=>[m])),_:1},8,["onClick"])])])])),_:1})])):(0,s.kq)("",!0),b.isSuccess?((0,s.wg)(),(0,s.j4)(U,{key:1,class:"bg-primary text-white q-ma-lg"},{avatar:(0,s.w5)((()=>[(0,s.Wm)(W,{name:"lock",color:"white"})])),action:(0,s.w5)((()=>[(0,s.Wm)(v,{flat:"",color:"white",label:"Перейти к авторизации",onClick:t[1]||(t[1]=t=>e.$router.push(y.homeUrl))})])),default:(0,s.w5)((()=>[u])),_:1})):(0,s.kq)("",!0),b.isTokenNotValid?((0,s.wg)(),(0,s.j4)(U,{key:2,class:"bg-red text-white q-ma-lg"},{avatar:(0,s.w5)((()=>[(0,s.Wm)(W,{name:"error",color:"white"})])),action:(0,s.w5)((()=>[(0,s.Wm)(v,{flat:"",color:"white",label:"Перейти к авторизации",onClick:t[2]||(t[2]=t=>e.$router.push(y.homeUrl))})])),default:(0,s.w5)((()=>[c,p,d,h,w,g])),_:1})):(0,s.kq)("",!0)])}o(67280);const b={computed:{homeUrl(){return"/"}},data(){return{regForm:{},flds:[{model:"password",label:"пароль",type:"password",icon:"lock"},{model:"passwordRepeat",label:"повторите пароль",type:"password",icon:"lock"}],isTokenNotValid:null,isShowForm:!1,isSuccess:!1,token:null}},methods:{changePassword(){!this.regForm.password||this.regForm.password.length<7?this.$q.notify({message:"Пароль должен быть больше 7 знаков",type:"negative",position:"top-right"}):this.regForm.password===this.regForm.passwordRepeat?this.$utils.postApiRequest({url:"/auth/email_auth_recover_password",params:{token:this.token,password:this.regForm.password}}).subscribe((e=>{e.ok?this.isSuccess=!0:this.$q.notify({message:e.message,type:"negative",position:"top-right"})})):this.$q.notify({message:"Повторно введенный пароль не совпадает с первым вариантом",type:"negative",position:"top-right"})}},created(){let e=window.location.search;if(e.split("?").length>1){let t=e.split("?")[1].split("=");"t"===t[0]&&t.length>1&&(this.token=t[1],this.$utils.postApiRequest({url:"/auth/email_auth_recover_password",params:{token:this.token,is_token_check:!0},isShowError:!1}).subscribe((e=>{e.ok?this.isShowForm=!0:this.isTokenNotValid=!0})))}}};var y=o(10151),q=o(39570),f=o(13747),W=o(34842),_=o(24554),v=o(2165),F=o(15607),U=o(7518),C=o.n(U);b.render=k;const j=b;C()(b,"components",{QCard:y.Z,QToolbar:q.Z,QToolbarTitle:f.Z,QInput:W.Z,QIcon:_.Z,QBtn:v.Z,QBanner:F.Z})}}]);