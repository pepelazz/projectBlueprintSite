(()=>{var e={41204:(e,t,l)=>{"use strict";l(67280),l(65363),l(10071);var s=l(34182),o=l(99592);const a={class:"q-gutter-sm row items-center no-wrap"};function i(e,t,l,o,i,n){const r=(0,s.up)("auth-comp"),d=(0,s.up)("waiting-auth-page"),u=(0,s.up)("fired-page"),c=(0,s.up)("q-btn"),m=(0,s.up)("q-toolbar-title"),p=(0,s.up)("q-space"),h=(0,s.up)("current-user-toolbar-menu"),g=(0,s.up)("q-toolbar"),w=(0,s.up)("q-header"),f=(0,s.up)("side-menu"),b=(0,s.up)("router-view"),y=(0,s.up)("q-page-container"),k=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)("div",null,[e.isLoggedIn||e.isInLogingProcess?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0})),e.isWaitingAuth?((0,s.wg)(),(0,s.j4)(d,{key:1})):(0,s.kq)("",!0),e.isFired?((0,s.wg)(),(0,s.j4)(u,{key:2})):(0,s.kq)("",!0),e.isLoggedIn&&e.isWorking?((0,s.wg)(),(0,s.j4)(k,{key:3,view:"hHh Lpr lFf"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{elevated:"",class:"bg-white text-grey-8 q-py-xs"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{dense:"",flat:"",round:"",icon:"menu",onClick:t[1]||(t[1]=e=>i.leftSide=!i.leftSide)}),(0,s.Wm)(c,{flat:"","no-caps":"","no-wrap":"",class:"q-ml-xs",onClick:t[2]||(t[2]=t=>e.$router.push("/"))},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{shrink:"",class:"text-weight-bold"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.$config.uiAppName),1)])),_:1})])),_:1}),(0,s.Wm)(p),(0,s.Wm)("div",a,[(0,s.Wm)(h,{currentUser:e.currentUser,onLogout:e.logout},null,8,["currentUser","onLogout"])])])),_:1})])),_:1}),(0,s.Wm)(f,{leftSide:i.leftSide,currentUser:e.currentUser,onHide:t[3]||(t[3]=e=>i.leftSide=!1)},null,8,["leftSide","currentUser"]),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{key:e.$route.fullPath,currentUser:e.currentUser,onReloadMsgList:t[4]||(t[4]=t=>e.$refs.messageList?e.$refs.messageList.reload():"")},null,8,["currentUser"])])),_:1})])),_:1})):(0,s.kq)("",!0)])}var n=l(43015);const r={key:1,src:"https://www.svgrepo.com/show/95333/avatar.svg"},d=(0,s.Uk)("редактировать"),u=(0,s.Uk)("выйти");function c(e,t,l,o,a,i){const n=(0,s.up)("comp-stat-img-src"),c=(0,s.up)("q-avatar"),m=(0,s.up)("q-item-section"),p=(0,s.up)("q-item"),h=(0,s.up)("q-separator"),g=(0,s.up)("q-list"),w=(0,s.up)("q-menu"),f=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)(f,{round:"",flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{rounded:"",size:"26px"},{default:(0,s.w5)((()=>[l.currentUser.avatar?((0,s.wg)(),(0,s.j4)(n,{key:0,src:l.currentUser.avatar},null,8,["src"])):((0,s.wg)(),(0,s.j4)("img",r))])),_:1}),(0,s.Wm)(w,{"transition-show":"flip-right","transition-hide":"flip-left","auto-close":""},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{dense:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"GL__menu-link-signed-in"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",null,[(0,s.Wm)("strong",null,(0,s.zw)(l.currentUser.fullname),1)])])),_:1})])),_:1}),(0,s.Wm)(h),(0,s.Wm)(p,{clickable:"",class:"GL__menu-link"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:t[1]||(t[1]=t=>e.$router.push("/profile"))},{default:(0,s.w5)((()=>[d])),_:1})])),_:1}),(0,s.Wm)(h),(0,s.Wm)(p,{clickable:"",class:"GL__menu-link"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:t[2]||(t[2]=t=>e.$emit("logout"))},{default:(0,s.w5)((()=>[u])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}const m={props:["currentUser"],data(){return{}}};var p=l(2165),h=l(75096),g=l(20811),w=l(27011),f=l(83414),b=l(52035),y=l(65869),k=l(7518),v=l.n(k);m.render=c;const _=m;v()(m,"components",{QBtn:p.Z,QAvatar:h.Z,QMenu:g.Z,QList:w.Z,QItem:f.Z,QItemSection:b.Z,QSeparator:y.Z});const q={key:0};function x(e,t,l,o,a,i){const n=(0,s.up)("q-avatar"),r=(0,s.up)("q-item-section"),d=(0,s.up)("q-item-label"),u=(0,s.up)("q-item"),c=(0,s.up)("q-expansion-item"),m=(0,s.up)("q-list"),p=(0,s.up)("q-scroll-area"),h=(0,s.up)("q-drawer"),g=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)(h,{modelValue:l.leftSide,side:"left",bordered:"","show-if-above":"","content-class":"bg-grey-2",width:240,onHide:t[1]||(t[1]=t=>e.$emit("hide"))},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"fit"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{padding:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.menuLinks,(e=>((0,s.wg)(),(0,s.j4)("div",{key:e.text},[i.isRole(e.roles)?((0,s.wg)(),(0,s.j4)("span",q,[e.isFolder?((0,s.wg)(),(0,s.j4)(c,{key:1,"header-class":"text-grey",closed:""},{header:(0,s.w5)((()=>[(0,s.Wm)(r,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)("img",{src:e.icon},null,8,["src"])])),_:2},1024)])),_:2},1024),(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.text),1)])),_:2},1024)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e.linkList,(e=>((0,s.wg)(),(0,s.j4)("span",{key:e.text},[i.isRole(e.roles)?(0,s.wy)(((0,s.wg)(),(0,s.j4)(u,{key:0,"inset-level":1,clickable:"",to:e.url,exact:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.text),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[g]]):(0,s.kq)("",!0)])))),128))])),_:2},1024)):(0,s.wy)(((0,s.wg)(),(0,s.j4)(u,{key:0,clickable:"",to:e.url,exact:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)("img",{src:e.icon},null,8,["src"])])),_:2},1024)])),_:2},1024),(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.text),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[g]])])):(0,s.kq)("",!0)])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])}const j={props:["leftSide","currentUser"],computed:{isRole(){return e=>{if(!e||0===e.length)return!0;if(!this.currentUser.role)return!1;let t=!1;return this.currentUser.role.map((l=>{e.includes(l)&&(t=!0)})),t}}},data(){return{menuLinks:[{icon:"https://image.flaticon.com/icons/svg/423/423063.svg",text:"Пользователи",url:"/users",roles:["admin"]},{icon:"image/legal_entity_icon.svg",text:"ЮрЛица",url:"/legal_entity",roles:[]},{isFolder:!0,icon:"https://image.flaticon.com/icons/svg/1643/1643260.svg",text:"Справочники",roles:[],linkList:[{icon:"image/legal_entity_icon.svg",text:"ЮрЛица",url:"/legal_entity",roles:[]}]}]}}};var W=l(52901),Z=l(47704),S=l(2350),Q=l(60429),C=l(46489);j.render=x;const U=j;v()(j,"components",{QDrawer:W.Z,QScrollArea:Z.Z,QList:w.Z,QItem:f.Z,QItemSection:b.Z,QAvatar:h.Z,QItemLabel:S.Z,QExpansionItem:Q.Z}),v()(j,"directives",{Ripple:C.Z});const D={key:1};function $(e,t,l,o,a,i){const n=(0,s.up)("login-page"),r=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)("div",null,[i.isRedirectToLoginPage?((0,s.wg)(),(0,s.j4)(n,{key:0})):((0,s.wg)(),(0,s.j4)("div",D,[(0,s.Wm)(r)]))])}const I={class:"layout"},F=(0,s.Wm)("div",{class:"row justify-center",style:{"margin-top":"20px","margin-bottom":"10px"}},[(0,s.Wm)("img",{src:"https://cdn.pixabay.com/photo/2017/05/05/00/15/kokopelli-2285538_960_720.png",alt:"",style:{width:"auto","max-height":"100px"}})],-1),V={class:"row justify-center q-mt-lg"};function T(e,t,l,o,a,i){const n=(0,s.up)("email-btn");return(0,s.wg)(),(0,s.j4)("div",I,[(0,s.Wm)("div",null,[F,(0,s.Wm)("div",V,[(0,s.Wm)(n)])])])}const L=(0,s.HX)("data-v-221765ad");(0,s.dD)("data-v-221765ad");const N=(0,s.Wm)("div",null,"войти",-1),P={class:"text-weight-bold"};(0,s.Cn)();const M=L(((e,t,l,o,a,i)=>{const n=(0,s.up)("q-icon"),r=(0,s.up)("q-btn"),d=(0,s.up)("q-toolbar-title"),u=(0,s.up)("q-toolbar"),c=(0,s.up)("comp-login-form"),m=(0,s.up)("comp-register-form"),p=(0,s.up)("comp-recover-password-form"),h=(0,s.up)("q-card-section"),g=(0,s.up)("q-card"),w=(0,s.up)("q-dialog"),f=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(r,{size:"md",outline:"",color:"primary",onClick:i.login,disabled:l.disabled},{default:L((()=>[(0,s.Wm)(n,{left:"",size:"3em",name:"perm_identity"}),N])),_:1},8,["onClick","disabled"]),(0,s.Wm)(w,{modelValue:a.modalIsOpened,"onUpdate:modelValue":t[1]||(t[1]=e=>a.modalIsOpened=e),persistent:""},{default:L((()=>[(0,s.Wm)(g,{style:{"min-width":"35%"}},{default:L((()=>[(0,s.Wm)(u,null,{default:L((()=>[(0,s.Wm)(d,null,{default:L((()=>[(0,s.Wm)("span",P,(0,s.zw)(i.dialogTitle),1)])),_:1}),(0,s.wy)((0,s.Wm)(r,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])])),_:1}),(0,s.Wm)(h,null,{default:L((()=>[a.emailRegister.isNewRegister||a.emailRegister.isPasswordRecover?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(c,{key:0,onRegister:i.showNewEmailUserRegister,onPasswordRecover:i.showPasswordRecover},null,8,["onRegister","onPasswordRecover"])),a.emailRegister.isNewRegister?((0,s.wg)(),(0,s.j4)(m,{key:1,onCancel:i.resetRegisterForm},null,8,["onCancel"])):(0,s.kq)("",!0),a.emailRegister.isPasswordRecover?((0,s.wg)(),(0,s.j4)(p,{key:2,onCancel:i.resetPasswordRecover},null,8,["onCancel"])):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])})),z={class:"q-gutter-md"},O=(0,s.Uk)("войти"),R={class:"row wrap justify-center items-start content-start"},A=(0,s.Uk)(" зарегистрироваться "),B=(0,s.Uk)("забыли пароль? ");function Y(e,t,l,o,a,i){const n=(0,s.up)("q-icon"),r=(0,s.up)("q-input"),d=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)("div",z,[(0,s.Wm)(r,{outlined:"",type:"email",label:"email",modelValue:a.email,"onUpdate:modelValue":t[1]||(t[1]=e=>a.email=e),autofocus:!0},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"email"})])),_:1},8,["modelValue"]),(0,s.Wm)(r,{outlined:"",type:"password",label:"пароль",modelValue:a.password,"onUpdate:modelValue":t[2]||(t[2]=e=>a.password=e),onKeydown:(0,s.D2)((0,s.iM)(i.login,["prevent"]),["enter"])},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"lock"})])),_:1},8,["modelValue","onKeydown"]),(0,s.Wm)("div",null,[(0,s.Wm)(d,{color:"primary",class:"full-width",onClick:i.login,onKeyup:(0,s.D2)(i.login,["enter"])},{default:(0,s.w5)((()=>[O])),_:1},8,["onClick","onKeyup"])]),(0,s.Wm)("div",R,[(0,s.Wm)(d,{class:"col",flat:"",color:"secondary",style:{"margin-bottom":"10px"},onClick:t[3]||(t[3]=t=>e.$emit("register"))},{default:(0,s.w5)((()=>[A])),_:1}),(0,s.Wm)(d,{class:"col",flat:"",color:"secondary",style:{"margin-bottom":"10px"},onClick:t[4]||(t[4]=t=>e.$emit("passwordRecover"))},{default:(0,s.w5)((()=>[B])),_:1})])])}const E={data(){return{email:null,password:null}},methods:{login(){H(this.email)?!this.password||this.password.length<7?this.$q.notify({message:"Пароль должен быть больше 7 знаков",type:"negative",position:"top-right"}):this.$utils.postApiRequest({url:"/auth/email",params:{login:this.email,password:this.password},isShowError:!1}).subscribe((e=>{e.ok?this.$currentUser.login({user:e.result}):e.message.includes("user not found")?this.$q.notify({message:"Пользователь с таким email не найден",type:"negative",position:"top-right"}):e.message.includes("wrong password")?this.$q.notify({message:"Неверный пароль",type:"negative",position:"top-right"}):this.$q.notify({message:e.message,type:"negative",position:"top-right"})})):this.$q.notify({message:'Поле "email" заполнено неверно',type:"negative",position:"top-right"})}}},H=e=>{let t=/\S+@\S+\.\S+/;return t.test(e)};var K=l(34842),G=l(24554);E.render=Y;const J=E;v()(E,"components",{QInput:K.Z,QIcon:G.Z,QBtn:p.Z});const X={key:0,class:"q-gutter-md"},ee={class:"row wrap justify-center items-start content-start q-gutter-md",style:{"margin-left":"0"}},te=(0,s.Uk)("отмена"),le=(0,s.Uk)("ok"),se={key:1},oe=(0,s.Wm)("div",{style:{padding:"20px"}},[(0,s.Uk)("Проверьте указанный в регистрации email."),(0,s.Wm)("br"),(0,s.Uk)("Должно прийти письмо для подтверждения почтового адреса. ")],-1);function ae(e,t,l,o,a,i){const n=(0,s.up)("q-icon"),r=(0,s.up)("q-input"),d=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)("div",null,[a.isRegisterSuccess?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)("div",X,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.flds,((e,t)=>((0,s.wg)(),(0,s.j4)(r,{key:e.model,outlined:"",type:e.type,label:e.label,modelValue:a.regForm[e.model],"onUpdate:modelValue":t=>a.regForm[e.model]=t,autofocus:0===t},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{name:e.icon},null,8,["name"])])),_:2},1032,["type","label","modelValue","onUpdate:modelValue","autofocus"])))),128)),(0,s.Wm)("div",ee,[(0,s.Wm)(d,{class:"col",outline:"",color:"secondary",onClick:t[1]||(t[1]=t=>e.$emit("cancel"))},{default:(0,s.w5)((()=>[te])),_:1}),(0,s.Wm)(d,{class:"col",color:"primary",onClick:i.login},{default:(0,s.w5)((()=>[le])),_:1},8,["onClick"])])])),a.isRegisterSuccess?((0,s.wg)(),(0,s.j4)("div",se,[oe])):(0,s.kq)("",!0)])}const ie={data(){return{regForm:{},flds:[{model:"login",label:"email",type:"email",icon:"email"},{model:"password",label:"пароль",type:"password",icon:"lock"},{model:"passwordRepeat",label:"повторите пароль",type:"password",icon:"lock"},{model:"last_name",label:"фамилия",type:"text",icon:"person"},{model:"first_name",label:"имя",type:"text",icon:"person_outline"}],isRegisterSuccess:!1}},methods:{login(){if(!ne(this.regForm.login))return void this.$q.notify({message:'Поле "email" заполнено неверно',type:"negative",position:"top-right"});if(!this.regForm.password||this.regForm.password.length<7)return void this.$q.notify({message:"Пароль должен быть больше 7 знаков",type:"negative",position:"top-right"});if(this.regForm.password!==this.regForm.passwordRepeat)return void this.$q.notify({message:"Повторно введенный пароль не совпадает с первым вариантом",type:"negative",position:"top-right"});if(!this.regForm.first_name)return void this.$q.notify({message:'Необходимо заполнить поле "имя"',type:"negative",position:"top-right"});if(!this.regForm.last_name)return void this.$q.notify({message:'Необходимо заполнить поле "фамилия"',type:"negative",position:"top-right"});let e=Object.assign({is_register:!0},this.regForm);this.$utils.postApiRequest({url:"/auth/email",params:e,isShowError:!1}).subscribe((e=>{e.ok?this.isRegisterSuccess=!0:e.message.includes("email already exist")?this.$q.notify({message:"Пользователь с таким email уже зарегестрирован",type:"negative",position:"top-right"}):this.$q.notify({message:e.message,type:"negative",position:"top-right"})}))}},mounted(){this.flds.map((e=>this.regForm[e.model]=null))}},ne=e=>{let t=/\S+@\S+\.\S+/;return t.test(e)};ie.render=ae;const re=ie;v()(ie,"components",{QInput:K.Z,QIcon:G.Z,QBtn:p.Z});const de={key:0,class:"q-gutter-md"},ue={class:"row wrap justify-center items-start content-start q-gutter-md",style:{"margin-left":"0"}},ce=(0,s.Uk)("отмена"),me=(0,s.Uk)("ok"),pe=(0,s.Wm)("div",{style:{padding:"20px"}},[(0,s.Uk)("Проверьте указанный в регистрации email."),(0,s.Wm)("br"),(0,s.Uk)("Должно прийти письмо с ссылкой для восстановления пароля. ")],-1);function he(e,t,l,o,a,i){const n=(0,s.up)("q-icon"),r=(0,s.up)("q-input"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-banner");return(0,s.wg)(),(0,s.j4)("div",null,[a.isSuccess?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)("div",de,[(0,s.Wm)(r,{outlined:"",type:"email",label:"Ваш email",modelValue:a.email,"onUpdate:modelValue":t[1]||(t[1]=e=>a.email=e),autofocus:!0},{prepend:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"email"})])),_:1},8,["modelValue"]),(0,s.Wm)("div",ue,[(0,s.Wm)(d,{class:"col",outline:"",color:"secondary",onClick:t[2]||(t[2]=t=>e.$emit("cancel"))},{default:(0,s.w5)((()=>[ce])),_:1}),(0,s.Wm)(d,{class:"col",color:"primary",onClick:i.ok},{default:(0,s.w5)((()=>[me])),_:1},8,["onClick"])])])),a.isSuccess?((0,s.wg)(),(0,s.j4)(u,{key:1,"inline-actions":"",class:"bg-grey-3 q-pa-md"},{default:(0,s.w5)((()=>[pe])),_:1})):(0,s.kq)("",!0)])}const ge={data(){return{email:null,isSuccess:!1}},methods:{ok(){we(this.email)?this.$utils.postApiRequest({url:"/auth/email_auth_start_recover_password",params:{email:this.email},isShowError:!1}).subscribe((e=>{e.ok?this.isSuccess=!0:e.message.includes("user not found")?this.$q.notify({message:"Пользователь с таким email не зарегестрирован",type:"negative",position:"top-right"}):this.$q.notify({message:e.message,type:"negative",position:"top-right"})})):this.$q.notify({message:'Поле "email" заполнено неверно',type:"negative",position:"top-right"})}}},we=e=>{let t=/\S+@\S+\.\S+/;return t.test(e)};var fe=l(15607);ge.render=he;const be=ge;v()(ge,"components",{QInput:K.Z,QIcon:G.Z,QBtn:p.Z,QBanner:fe.Z});const ye={props:["disabled"],components:{compLoginForm:J,compRegisterForm:re,compRecoverPasswordForm:be},computed:{dialogTitle(){return this.emailRegister.isNewRegister?"Регистрация":this.emailRegister.isPasswordRecover?"Восстановление пароля":"Авторизация"}},data(){return{modalIsOpened:!1,emailRegister:{isNewRegister:!1,isNewRegisterSuccess:!1,isPasswordRecover:!1,isPasswordRecoverSuccess:!1}}},methods:{login(){this.modalIsOpened=!0},showNewEmailUserRegister(){this.emailRegister.isNewRegister=!0,this.emailRegister.isNewRegisterSuccess=!1},resetRegisterForm(){this.emailRegister.isNewRegister=!1},showPasswordRecover(){this.emailRegister.isPasswordRecover=!0},resetPasswordRecover(){this.emailRegister.isPasswordRecover=!1}}};var ke=l(46778),ve=l(10151),_e=l(39570),qe=l(13747),xe=l(25589),je=l(60677);ye.render=M,ye.__scopeId="data-v-221765ad";const We=ye;v()(ye,"components",{QBtn:p.Z,QIcon:G.Z,QDialog:ke.Z,QCard:ve.Z,QToolbar:_e.Z,QToolbarTitle:qe.Z,QCardSection:xe.Z}),v()(ye,"directives",{ClosePopup:je.Z});const Ze={components:{emailBtn:We},data(){return{}}};Ze.render=T;const Se=Ze,Qe={components:{loginPage:Se},computed:{isRedirectToLoginPage:function(){return!["/check_user_email","/email_auth_recover_password"].includes(this.$route.path)}}};Qe.render=$;const Ce=Qe,Ue={class:"layout"},De=(0,s.Wm)("div",{class:"row justify-center",style:{"margin-top":"20px","margin-bottom":"10px"}},[(0,s.Wm)("img",{src:"[[appLogoSrc]]",alt:"",style:{width:"auto","max-height":"100px"}})],-1),$e={class:"row justify-center q-mt-lg"},Ie=(0,s.Wm)("img",{src:"https://image.flaticon.com/icons/svg/197/197729.svg"},null,-1),Fe=(0,s.Uk)(" Ожидаем подтверждения Вашей авторизации ");function Ve(e,t,l,o,a,i){const n=(0,s.up)("q-avatar"),r=(0,s.up)("q-banner");return(0,s.wg)(),(0,s.j4)("div",Ue,[(0,s.Wm)("div",null,[De,(0,s.Wm)("div",$e,[(0,s.Wm)(r,{class:"bg-grey-3"},{avatar:(0,s.w5)((()=>[(0,s.Wm)(n,{rounded:""},{default:(0,s.w5)((()=>[Ie])),_:1})])),default:(0,s.w5)((()=>[Fe])),_:1})])])])}const Te={data(){return{}}};Te.render=Ve;const Le=Te;v()(Te,"components",{QBanner:fe.Z,QAvatar:h.Z});const Ne={class:"layout"},Pe=(0,s.Wm)("div",{class:"row justify-center",style:{"margin-top":"20px","margin-bottom":"10px"}},[(0,s.Wm)("img",{src:"[[appLogoSrc]]",alt:"",style:{width:"auto","max-height":"100px"}})],-1),Me={class:"row justify-center q-mt-lg"},ze=(0,s.Wm)("img",{src:"https://image.flaticon.com/icons/svg/440/440682.svg"},null,-1),Oe=(0,s.Uk)(" Ваш аккаунт заблокирован. Обратитесь к администратору. ");function Re(e,t,l,o,a,i){const n=(0,s.up)("q-avatar"),r=(0,s.up)("q-banner");return(0,s.wg)(),(0,s.j4)("div",Ne,[(0,s.Wm)("div",null,[Pe,(0,s.Wm)("div",Me,[(0,s.Wm)(r,{class:"bg-grey-3"},{avatar:(0,s.w5)((()=>[(0,s.Wm)(n,{rounded:""},{default:(0,s.w5)((()=>[ze])),_:1})])),default:(0,s.w5)((()=>[Oe])),_:1})])])])}const Ae={data(){return{}}};Ae.render=Re;const Be=Ae;v()(Ae,"components",{QBanner:fe.Z,QAvatar:h.Z});const Ye={mixins:[n.Z],components:{authComp:Ce,currentUserToolbarMenu:_,sideMenu:U,waitingAuthPage:Le,firedPage:Be},data(){return{leftSide:!0,isShowMsgList:!1,isShowTaskList:!1,messageCounter:0,taskCounter:0}},methods:{toggleTaskList(){this.isShowTaskList?this.isShowTaskList=!1:this.isShowMsgList?(this.isShowMsgList=!1,this.$nextTick((()=>this.isShowTaskList=!0))):this.isShowTaskList=!0},toggleMsgList(){this.isShowMsgList?this.isShowMsgList=!1:this.isShowTaskList?(this.isShowTaskList=!1,this.$nextTick((()=>this.isShowMsgList=!0))):this.isShowMsgList=!0},hideRightSidebar(){this.isShowMsgList=!1,this.isShowTaskList=!1}},mounted(){this.$currentUser.login()}};var Ee=l(19214),He=l(53812),Ke=l(62025),Ge=l(72652);Ye.render=i;const Je=Ye;v()(Ye,"components",{QLayout:Ee.Z,QHeader:He.Z,QToolbar:_e.Z,QBtn:p.Z,QAvatar:h.Z,QToolbarTitle:qe.Z,QSpace:Ke.Z,QPageContainer:Ge.Z});var Xe=l(47083),et=l(79582);const tt=[{path:"/",component:()=>l.e(529).then(l.bind(l,45529))},{path:"/check_user_email",component:()=>l.e(401).then(l.bind(l,51401))},{path:"/email_auth_recover_password",component:()=>l.e(628).then(l.bind(l,98628))},{path:"/users",component:()=>l.e(175).then(l.bind(l,65175))},{path:"/users/:id",component:()=>l.e(879).then(l.bind(l,52879)),props:!0},{path:"/profile",component:()=>l.e(721).then(l.bind(l,44721))},{path:"/legal_entity",component:()=>l.e(651).then(l.bind(l,41651)),props:!0},{path:"/legal_entity/:id",component:()=>l.e(97).then(l.bind(l,1097)),props:!0},{path:"/:catchAll(.*)*",component:()=>l.e(31).then(l.bind(l,63031))}],lt=tt,st=(0,Xe.BC)((function(){const e=et.PO,t=(0,et.p7)({scrollBehavior:()=>({left:0,top:0}),routes:lt,history:e("/admin")});return t}));async function ot(e,t){const l="function"===typeof st?await st({}):st,s=e(Je);return s.use(o.Z,t),{app:s,router:l}}var at=l(29664),it=l(10846),nt=l(69721),rt=l(67030),dt=l(85626),ut=l(42670),ct=l(31481),mt=l(85926),pt=l(99367),ht=l(65735),gt=l(40629),wt=l(90498),ft=l(86115),bt=l(39200),yt=l(39975),kt=l(24152),vt=l(92729),_t=l(66941),qt=l(96296),xt=l(75682),jt=l(24379),Wt=l(21007),Zt=l(83944),St=l(61289),Qt=l(77991),Ct=l(42770),Ut=l(34765),Dt=l(72448),$t=l(62064),It=l(82471),Ft=l(96552),Vt=l(83518),Tt=l(90118),Lt=l(80218),Nt=l(31993),Pt=l(92414),Mt=l(18186),zt=l(57547),Ot=l(58408),Rt=l(5906),At=l(86602),Bt=l(35990),Yt=l(1432),Et=l(23424),Ht=l(28886),Kt=l(5363),Gt=l(55078),Jt=l(83884),Xt=l(37833),el=l(1419),tl=l(64434),ll=l(11417);const sl={config:{},lang:at.Z,components:{QAvatar:h.Z,QLayout:Ee.Z,QBar:it.Z,QBadge:nt.Z,QChip:rt.Z,QHeader:He.Z,QDate:dt.Z,QDrawer:W.Z,QDialog:ke.Z,QBanner:fe.Z,QBtn:p.Z,QBtnDropdown:ut.Z,QBreadcrumbs:ct.Z,QBreadcrumbsEl:mt.Z,QCard:ve.Z,QCardActions:pt.Z,QCardSection:xe.Z,QCheckbox:ht.Z,QChatMessage:gt.Z,QEditor:wt.Z,QField:ft.Z,QExpansionItem:Q.Z,QFab:bt.Z,QFabAction:yt.Z,QIcon:G.Z,QImg:kt.Z,QInput:K.Z,QInfiniteScroll:vt.Z,QInnerLoading:_t.Z,QList:w.Z,QKnob:qt.Z,QItem:f.Z,QItemSection:b.Z,QItemLabel:S.Z,QMenu:g.Z,QOptionGroup:xt.Z,QPageContainer:Ge.Z,QPage:jt.Z,QPageSticky:Wt.Z,QPopupProxy:Zt.Z,QPopupEdit:St.Z,QRadio:Qt.Z,QRouteTab:Ct.Z,QScrollArea:Z.Z,QSeparator:y.Z,QSpace:Ke.Z,QSpinnerDots:Ut.Z,QSelect:Dt.Z,QSlider:$t.Z,QSlideTransition:It.Z,QStep:Ft.Z,QStepper:Vt.Z,QStepperNavigation:Tt.Z,QSplitter:Lt.Z,QTable:Nt.Z,QTh:Pt.Z,QTr:Mt.Z,QTabs:zt.Z,QTab:Ot.Z,QTabPanels:Rt.Z,QTabPanel:At.Z,QTime:Bt.Z,QTimeline:Yt.Z,QTimelineEntry:Et.Z,QToggle:Ht.Z,QToolbar:_e.Z,QToolbarTitle:qe.Z,QTooltip:Kt.Z,QTree:Gt.Z,QTd:Jt.Z,QUploader:Xt.Z,QVideo:el.Z},directives:{Ripple:C.Z,ClosePopup:je.Z},plugins:{Notify:tl.Z,Dialog:ll.Z}},ol="/static/",al=/\/\//,il=e=>(ol+e).replace(al,"/");async function nl({app:e,router:t},l){let s=!1;const o=e=>{s=!0;const l=Object(e)===e?il(t.resolve(e).fullPath):e;window.location.href=l},a=window.location.href.replace(window.location.origin,"");for(let n=0;!1===s&&n<l.length;n++)try{await l[n]({app:e,router:t,ssrContext:null,redirect:o,urlPath:a,publicPath:ol})}catch(i){return i&&i.url?void(window.location.href=i.url):void console.error("[Quasar] boot error:",i)}!0!==s&&(e.use(t),e.mount("#q-app"))}ot(s.ri,sl).then((e=>Promise.all([Promise.resolve().then(l.bind(l,95769)),Promise.resolve().then(l.bind(l,5474)),Promise.resolve().then(l.bind(l,87452)),Promise.resolve().then(l.bind(l,44926)),Promise.resolve().then(l.bind(l,16006))]).then((t=>{const l=t.map((e=>e.default)).filter((e=>"function"===typeof e));nl(e,l)}))))},43015:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});var s=l(62007),o=l(52802);const a={computed:{isLoggedIn(){return this.currentUser},isWorking(){return this.currentUser&&this.currentUser.options&&"working"===this.currentUser.options.state},isWaitingAuth(){return this.currentUser&&this.currentUser.options&&"waiting_auth"===this.currentUser.options.state},isFired(){return this.currentUser&&this.currentUser.options&&"fired"===this.currentUser.options.state},isAdmin(){var e,t;return null===(e=this.currentUser)||void 0===e||null===(t=e.role)||void 0===t?void 0:t.includes("admin")}},data(){return{currentUser:{},isInLogingProcess:!1,currentUserdestroy$:new s.x}},methods:{login(){this.$currentUser.login()},logout(){this.$currentUser.logout()}},mounted(){this.$currentUser.getUser$().pipe((0,o.R)(this.currentUserdestroy$)).subscribe((e=>{this.currentUser=e})),this.$currentUser.getIsInLogingProcess().pipe((0,o.R)(this.currentUserdestroy$)).subscribe((e=>{this.isInLogingProcess=e}))},destroyed(){this.currentUserdestroy$.next(!0),this.currentUserdestroy$.complete()}}},61764:(e,t,l)=>{"use strict";l.d(t,{Z:()=>s});const s={appName:"CompanyName",uiAppName:"CompanyName",apiUrl:()=>"http://localhost:3101",wsUrl:()=>"wss://http://localhost:3101",isEmailAuth:{firstName:!0,lastName:!0},logoSrc:"https://cdn.pixabay.com/photo/2017/05/05/00/15/kokopelli-2285538_960_720.png",dadataToken:"1cf3a086e3dbe1306ed142d2b5fbc1b324b8eb60",breadcrumbIcons:{legal_entity:"far fa-file-alt"},tablesForTask:{}}},91589:(e,t,l)=>{"use strict";l.d(t,{Z:()=>W});l(10071),l(17965),l(67280);var s=l(31954),o=l(15894),a=l(90319),i=l(42087),n=l(6720),r=l(64434),d=l(61764),u=l(88603),c=l.n(u),m=l(50947),p=l.n(m),h=l(11488),g=l.n(h);const w=({url:e,params:t,isShowError:l=!0})=>(0,n.h)({url:`${d.Z.apiUrl()}${e}`,method:"POST",headers:Z(),body:{params:t}}).pipe((0,o.q)(1),(0,a.U)(S()),(0,i.K)(Q(l))),f=({method:e,params:t,isShowError:l=!0,successMsg:s=null})=>(0,n.h)({url:`${d.Z.apiUrl()}/api/call_pg_func`,method:"POST",headers:Z(),body:{method:e,params:t}}).pipe((0,o.q)(1),(0,a.U)(S({successMsg:s})),(0,i.K)(Q(l))),b=({method:e,params:t,cb:l,successMsg:s})=>f({method:e,params:t,successMsg:s}).subscribe((e=>l?l(e.ok?e.result:null):null)),y=function({method:e,cb:t}){if("new"===this.id)this.item={id:-1},c().flattenDeep(this.flds).map((e=>{this.item[e.name]=e.default||null}));else{t=t||(e=>{this.item=e});const l=e=>p().compose(t,_(this))(e);b({method:e,params:{id:this.id},cb:l})}},k=function({method:e,itemForSaveMod:t={},resultModify:l,cb:s}){let o=Object.assign({},this.item);const a=c().flattenDeep(this.flds).map((({name:e})=>e));o.options||(o.options={}),o=Object.assign(o,t),this.optionsFlds&&this.optionsFlds.map((e=>o.options[e]=o[e]));const i=Object.assign({},c().pick(o,["id",...a,"options"]));let n=c().flattenDeep(this.flds).filter((e=>e.required&&!i[e.name]));n.length>0?n.map((e=>{this.$q.notify({color:"negative",position:"bottom",message:`не заполнено поле '${e.label}'`})})):f({method:e,params:i,successMsg:"изменения сохранены"}).subscribe((e=>{e.ok&&(-1===this.item.id&&this.$router.push(`${this.docUrl}/${e.result.id}`),l=l||(e=>e),this.item=p().compose(l,_(this))(e.result),this.$emit("updated",this.item),s&&s())}))},v=(e,t,l)=>{f({method:e,params:t}).subscribe((e=>{e.ok&&l&&l(e.result)}))},_=e=>t=>(e.optionsFlds&&e.optionsFlds.map((e=>t[e]=t.options[e])),t),q=(e={},t=!0)=>{let l=new URLSearchParams(window.location.search);Object.keys(e).forEach((function(s){t&&null!==e[s]?l.set(s,e[s]):l.delete(s)}));let s=window.location.protocol+"//"+window.location.host+window.location.pathname;l.toString().length>0&&(s=s+"?"+l.toString()),window.history.pushState({path:s},"",s)},x=e=>e?g()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY HH:mm"):null,j=e=>e?g()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY"):null,W={postApiRequest:w,postCallPgMethod:f,callPgMethod:v,pgCall:b,getDocItemById:y,saveItem:k,updateUrlQuery:q,formatPgDateTime:x,formatPgDate:j,_:c()},Z=()=>{let e={"Content-Type":"application/json"},t=localStorage.getItem(d.Z.appName);return t&&(e["Auth-token"]=t),e},S=({successMsg:e}={})=>t=>{if(t.response&&!t.response.ok)throw new Error(t.response.message);return t.response&&t.response.ok&&e&&r.Z.create({color:"positive",position:"bottom-right",message:e}),t.response},Q=e=>t=>{const l=t.response?t.response.message:t.message;return e&&r.Z.create({color:"negative",position:"top-right",message:l}),(0,s.of)({ok:!1,message:l})}},5474:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>a});var s=l(30052),o=l.n(s);const a=async({app:e})=>{e.config.globalProperties.$axios=o()}},95769:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var s=l(61764);const o=async({app:e})=>{e.config.globalProperties.$config=s.Z}},87452:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>h});var s=l(25429),o=l.n(s),a=l(72905),i=l(61764),n=l(91589),r=l(16249);let d=new a.X(null),u=new a.X(!1);const c=class{constructor(){o()(this,"getUser$",(()=>d)),o()(this,"login",(({user:e,auth_token:t}={})=>{e?(d.next(e),localStorage.setItem(i.Z.appName,e.auth_token)):(t||(t=localStorage.getItem(i.Z.appName)),localStorage.setItem(i.Z.appName,t),m(!0),n.Z.postApiRequest({url:"/api/current_user",params:{auth_token:t},isShowError:!1}).subscribe((e=>{e.ok?(d.next(e.result),localStorage.setItem(i.Z.appName,e.result.auth_token),m(!1)):(this.logout(),m(!1))})))})),o()(this,"logout",(()=>{d.next(null),localStorage.removeItem(i.Z.appName)})),o()(this,"getIsInLogingProcess",(()=>u))}},m=e=>{e?(r.Z.show({message:"авторизация"}),u.next(!0)):(r.Z.hide(),u.next(!1))},p=c,h=async({app:e})=>{e.config.globalProperties.$currentUser=new p}},16006:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>ms});var s=l(34182);const o={class:"row"},a={class:"text-grey-8 q-gutter-xs"},i={class:"text-grey-8 q-gutter-xs"},n={class:"row justify-center q-my-md"};function r(e,t,l,r,d,u){const c=(0,s.up)("q-item-label"),m=(0,s.up)("q-item-section"),p=(0,s.up)("q-btn"),h=(0,s.up)("q-item"),g=(0,s.up)("q-list"),w=(0,s.up)("q-menu"),f=(0,s.up)("q-icon"),b=(0,s.up)("q-input"),y=(0,s.up)("q-spinner-dots"),k=(0,s.up)("q-infinite-scroll"),v=(0,s.up)("q-page-sticky");return(0,s.wg)(),(0,s.j4)("div",o,[(0,s.Wm)("div",{class:u.colClassComputed},[(0,s.Wm)(k,{onLoad:u.itemListLoad,offset:250,ref:"infiniteScroll"},{loading:(0,s.w5)((()=>[(0,s.Wm)("div",n,[(0,s.Wm)(y,{color:"primary",size:"40px"})])])),default:(0,s.w5)((()=>[(0,s.Wm)(g,{bordered:"",class:"rounded-borders",separator:""},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(u.computedListTitle),1)])),_:1})])),_:1}),(0,s.Wm)(m,{top:"",side:""},{default:(0,s.w5)((()=>[(0,s.Wm)("div",a,[l.readonly||!l.newDocUrl&&!l.newDocEventOnly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(s.HY,{key:0},[l.newDocEventOnly?((0,s.wg)(),(0,s.j4)(p,{key:1,size:"12px",flat:"",dense:"",round:"",icon:"add",onClick:t[1]||(t[1]=t=>e.$emit("clickAddBtn"))})):((0,s.wg)(),(0,s.j4)(p,{key:0,size:"12px",flat:"",dense:"",round:"",icon:"add",onClick:u.openNewDoc},null,8,["onClick"]))],64)),(0,s.WI)(e.$slots,"addBtnsSlot"),l.searchFldName?((0,s.wg)(),(0,s.j4)(p,{key:1,size:"12px",flat:"",dense:"",round:"",icon:"search",onClick:u.toggleSearchFld},null,8,["onClick"])):(0,s.kq)("",!0),l.listSortData?((0,s.wg)(),(0,s.j4)(p,{key:2,size:"12px",flat:"",dense:"",round:"",icon:"expand_less"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{"auto-close":""},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(l.listSortData,(e=>((0,s.wg)(),(0,s.j4)(h,{clickable:"",key:e.value},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:t=>u.changeItemList({order_by:`${e.value}`})},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,s.kq)("",!0),l.listSortData?((0,s.wg)(),(0,s.j4)(p,{key:3,size:"12px",flat:"",dense:"",round:"",icon:"expand_more"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{"auto-close":""},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(l.listSortData,(e=>((0,s.wg)(),(0,s.j4)(h,{clickable:"",key:e.value},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:t=>u.changeItemList({order_by:`${e.value} desc`})},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,s.kq)("",!0),l.listFilterData?((0,s.wg)(),(0,s.j4)(p,{key:4,size:"12px",flat:"",dense:"",round:"",icon:"filter_list"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{"auto-close":""},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(l.listFilterData,(e=>((0,s.wg)(),(0,s.j4)(h,{clickable:"",key:e.title},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{onClick:t=>u.changeItemList(e.value)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):(0,s.kq)("",!0)])])),_:3})])),_:1}),d.isShowSearchfld&&l.searchFldName?((0,s.wg)(),(0,s.j4)(h,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{top:""},{default:(0,s.w5)((()=>[(0,s.Wm)("div",i,[(0,s.Wm)(b,{ref:"searchInput",dense:"",filled:"",modelValue:d.searchTxt,"onUpdate:modelValue":t[3]||(t[3]=e=>d.searchTxt=e),class:"q-ml-md"},{append:(0,s.w5)((()=>[""===d.searchTxt?((0,s.wg)(),(0,s.j4)(f,{key:0,name:"search"})):((0,s.wg)(),(0,s.j4)(f,{key:1,name:"clear",class:"cursor-pointer",onClick:t[2]||(t[2]=e=>d.searchTxt="")}))])),_:1},8,["modelValue"])])])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"addFilterSlot"),((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(d.itemList,(t=>((0,s.wg)(),(0,s.j4)(h,{key:t.id},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"listItem",{item:t})])),_:2},1024)))),128))])),_:3})])),_:1},8,["onLoad"])],2),l.readonly||!l.newDocUrl&&!l.newDocEventOnly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(v,{key:0,position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[l.newDocEventOnly?((0,s.wg)(),(0,s.j4)(p,{key:1,fab:"",icon:"add",color:"accent",onClick:t[4]||(t[4]=t=>e.$emit("clickAddBtn"))})):((0,s.wg)(),(0,s.j4)(p,{key:0,fab:"",icon:"add",color:"accent",onClick:u.openNewDoc},null,8,["onClick"]))])),_:1}))])}l(10071),l(17965),l(67280);var d=l(49405),u=l(88603),c=l.n(u);const m={props:["listTitle","listDeletedTitle","pgMethod","listSortData","listFilterData","searchFldName","newDocEventOnly","newDocUrl","isOpenNewInTab","urlQueryParams","ext","readonly","colClass","startFilter"],computed:{computedListTitle(){return this.listParams.deleted?this.listDeletedTitle:this.listTitle},colClassComputed(){return this.colClass||"col-xs-12 col-sm-12 col-md-6 q-gutter-md q-pt-md"}},data(){return{searchTxt:"",isShowSearchfld:!1,itemList:[],listParams:{page:0,per_page:10,deleted:!1},isUrlQueryProcessed:!1}},methods:{toggleSearchFld(){this.isShowSearchfld=!this.isShowSearchfld,this.isShowSearchfld||(this.listParams[this.searchFldName]=""),this.isShowSearchfld&&this.$nextTick((()=>{this.$refs.searchInput.focus()}))},itemListLoad(e,t){if(!this.isUrlQueryProcessed&&(this.isUrlQueryProcessed=!0,this.urlQueryParams)){const e=new URLSearchParams(window.location.search);this.urlQueryParams.map((t=>{"string"===typeof t&&e.has(t)&&(this.listParams[t]=e.get(t))}))}this.loadList({list:this.itemList,params:this.listParams,done:t})},loadList({list:e=[],params:t={},done:l}){this.listParams.page++,this.$utils.updateUrlQuery(c().omit(t,["per_page","page"])),this.$utils.postCallPgMethod({method:this.pgMethod,params:Object.assign(t,this.ext?this.ext:{})}).subscribe((t=>{t.ok&&t.result&&t.result.length>0?(t.result.map((t=>e.push(t))),this.$emit("updateCount",e.length),l&&l()):l&&l(!0)}))},reloadList(){this.itemList=[],this.listParams.page=0,this.$refs.infiniteScroll.resume(),this.loadList({list:this.itemList,params:this.listParams}),this.$forceUpdate()},reloadListDebounce(){this.reloadList()},changeItemList(e){this.listParams=Object.assign(this.listParams,e),this.reloadList()},openNewDoc(){this.isOpenNewInTab?window.open("/"+this.newDocUrl,"_blank"):this.$router.push(this.newDocUrl)}},watch:{searchTxt(e){this.searchFldName&&(0===e.length||e.length>3)&&(this.listParams[this.searchFldName]=e,this.reloadListDebounce())}},mounted(){this.startFilter&&(this.listParams=Object.assign(this.listParams,this.startFilter)),this.loadList({list:this.itemList,params:this.listParams}),this.reloadListDebounce=(0,d.Z)(this.reloadListDebounce,300)}};var p=l(92729),h=l(27011),g=l(83414),w=l(52035),f=l(2350),b=l(2165),y=l(20811),k=l(34842),v=l(24554),_=l(34765),q=l(21007),x=l(7518),j=l.n(x);m.render=r;const W=m;j()(m,"components",{QInfiniteScroll:p.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z,QItemLabel:f.Z,QBtn:b.Z,QMenu:y.Z,QInput:k.Z,QIcon:v.Z,QSpinnerDots:_.Z,QPageSticky:q.Z});const Z={class:"text-grey-8 q-gutter-xs"},S=(0,s.Uk)("редактировать"),Q=(0,s.Uk)("удалить"),C=(0,s.Uk)("восстановить");function U(e,t,l,o,a,i){const n=(0,s.up)("q-item-section"),r=(0,s.up)("q-item"),d=(0,s.up)("q-list"),u=(0,s.up)("q-menu"),c=(0,s.up)("q-btn"),m=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",Z,[(0,s.Wm)(c,{size:"12px",flat:"",dense:"",round:"",icon:"more_vert"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{dense:"",style:{"min-width":"100px"}},{default:(0,s.w5)((()=>[l.isEdit?(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{key:0,clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("edit"))},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[S])),_:1})])),_:1},512)),[[m]]):(0,s.kq)("",!0),l.isDelete?(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{key:1,clickable:"",onClick:t[2]||(t[2]=e=>i.confirmItemDeleteRecover(l.item))},{default:(0,s.w5)((()=>[l.item.deleted?((0,s.wg)(),(0,s.j4)(n,{key:1},{default:(0,s.w5)((()=>[C])),_:1})):((0,s.wg)(),(0,s.j4)(n,{key:0},{default:(0,s.w5)((()=>[Q])),_:1}))])),_:1},512)),[[m]]):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})])}const D={props:["item","itemProp","isDelete","isEdit","pgMethod"],methods:{confirmItemDeleteRecover(e){const t=e[this.itemProp]?e[this.itemProp]:"";this.$q.dialog({title:"Подтвердите",message:`${e.deleted?"восстановить":"удалить"} : <strong>${t}</strong>`,ok:"ok",cancel:"отмена",html:!0}).onOk((()=>{this.$utils.postCallPgMethod({method:this.pgMethod,params:{id:e.id,deleted:!e.deleted}}).subscribe((e=>{this.$emit("reload-list")}))}))}}};var $=l(60677);D.render=U;const I=D;j()(D,"components",{QBtn:b.Z,QMenu:y.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z}),j()(D,"directives",{ClosePopup:$.Z});const F={key:0,class:"text-weight-bold form-separator-header"},V={key:10,class:"q-gutter-sm"},T={key:11};function L(e,t,l,o,a,i){const n=(0,s.up)("q-input"),r=(0,s.up)("q-icon"),d=(0,s.up)("q-select"),u=(0,s.up)("comp-fld-user-search"),c=(0,s.up)("comp-fld-ref-search"),m=(0,s.up)("comp-fld-date"),p=(0,s.up)("comp-fld-date-time"),h=(0,s.up)("q-checkbox");return(0,s.wg)(),(0,s.j4)("div",{class:l.columnClass},["separator"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)("div",F,(0,s.zw)(l.label),1)):(0,s.kq)("",!0),"string"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(n,{key:1,outlined:"",type:l.type,label:l.label,modelValue:l.fld,onInput:t[1]||(t[1]=t=>e.$emit("update",t)),readonly:l.readonly,autogrow:""},null,8,["type","label","modelValue","readonly"])):(0,s.kq)("",!0),"number"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(n,{key:2,outlined:"",type:l.type,label:l.label,modelValue:l.fld,onInput:t[2]||(t[2]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["type","label","modelValue","readonly"])):(0,s.kq)("",!0),"phone"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(n,{key:3,outlined:"",label:l.label,modelValue:l.fld,onInput:t[3]||(t[3]=t=>e.$emit("update",t)),mask:"+# (###) ### - ####",readonly:l.readonly},{prepend:(0,s.w5)((()=>[(0,s.Wm)(r,{name:"phone"})])),_:1},8,["label","modelValue","readonly"])):(0,s.kq)("",!0),"select"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(d,{key:4,outlined:"",label:l.label,modelValue:l.fld,options:l.selectOptions,onInput:t[4]||(t[4]=t=>e.$emit("update",t)),readonly:l.readonly},(0,s.Nv)({_:2},[l.icon?{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(r,{name:l.icon},null,8,["name"])]))}:void 0]),1032,["label","modelValue","options","readonly"])):(0,s.kq)("",!0),"selectMultiple"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(d,{key:5,outlined:"",label:l.label,modelValue:l.fld,multiple:"",options:l.selectOptions,onInput:t[5]||(t[5]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","modelValue","options","readonly"])):(0,s.kq)("",!0),"userId"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(u,{key:6,label:l.label,user:l.ajaxSelectTitle,ext:l.ext,onUpdate:t[6]||(t[6]=t=>e.$emit("update",t.id)),readonly:l.readonly},null,8,["label","user","ext","readonly"])):(0,s.kq)("",!0),"refSearch"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(c,{key:7,label:l.label,pgMethod:l.pgMethod,itemTitleFldName:l.itemTitleFldName,onUpdate:t[7]||(t[7]=t=>e.$emit("update",t.id)),readonly:l.readonly,ext:l.ext},null,8,["label","pgMethod","itemTitleFldName","readonly","ext"])):(0,s.kq)("",!0),"date"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(m,{key:8,label:l.label,"date-string":i.formatDateForSelector(l.fld),onUpdate:t[8]||(t[8]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","date-string","readonly"])):(0,s.kq)("",!0),"datetime"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)(p,{key:9,label:l.label,"date-string":i.formatDateTimeForSelector(l.fld),onUpdate:t[9]||(t[9]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","date-string","readonly"])):(0,s.kq)("",!0),"checkbox"==l.type&&l.vif?((0,s.wg)(),(0,s.j4)("div",V,[(0,s.Wm)(h,{modelValue:a.localFld,"onUpdate:modelValue":t[10]||(t[10]=e=>a.localFld=e),label:l.label,onInput:t[11]||(t[11]=t=>e.$emit("update",t))},null,8,["modelValue","label"])])):(0,s.kq)("",!0),l.compName&&l.vif?((0,s.wg)(),(0,s.j4)("div",T,[((0,s.wg)(),(0,s.j4)((0,s.LL)(l.compName),{label:l.label,fld:l.fld,type:l.type,item:l.item,ajaxSelectTitle:l.ajaxSelectTitle,selectOptions:l.selectOptions,columnClass:l.columnClass,ext:l.ext,onUpdate:t[12]||(t[12]=t=>e.$emit("update",t)),readonly:l.readonly},null,8,["label","fld","type","item","ajaxSelectTitle","selectOptions","columnClass","ext","readonly"]))])):(0,s.kq)("",!0)],2)}var N=l(11488),P=l.n(N);const M={props:{item:{},type:{},label:{},fld:{},selectOptions:null,ajaxSelectTitle:null,ext:null,readonly:null,columnClass:{default:"col-xs-12 col-sm-6 col-md-4"},icon:null,vif:{default:!0},compName:null,pgMethod:null,itemTitleFldName:null,href:null},data(){return{localFld:null}},methods:{formatDateForSelector(e){return e?P()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY"):null},formatDateTimeForSelector(e){return e?P()(e,"YYYY-MM-DDTHH:mm:ss").format("DD-MM-YYYY HH:mm"):null}},mounted(){this.localFld=this.fld}};var z=l(72448),O=l(65735);M.render=L;const R=M;j()(M,"components",{QInput:k.Z,QIcon:v.Z,QSelect:z.Z,QCheckbox:O.Z});const A=(0,s.Uk)(" No results ");function B(e,t,l,o,a,i){const n=(0,s.up)("q-item-section"),r=(0,s.up)("q-item"),d=(0,s.up)("q-select");return(0,s.wg)(),(0,s.j4)(d,{outlined:"",modelValue:a.localUser,"onUpdate:modelValue":t[1]||(t[1]=e=>a.localUser=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:a.options,onFilter:i.filterFn,readonly:l.readonly},{"no-option":(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"text-grey"},{default:(0,s.w5)((()=>[A])),_:1})])),_:1})])),_:1},8,["modelValue","label","options","onFilter","readonly"])}const Y={props:{user:{type:String},label:{type:String},ext:{type:Object},readonly:{type:Boolean,default:!1}},data(){return{localUser:{},options:[]}},created(){const e=this.user?this.user:null;this.localUser={label:e,value:e}},watch:{localUser:function(e){e&&e.user&&this.$emit("update",{id:e.user.id,fullname:e.user.fullname})}},methods:{filterFn(e,t,l){t((()=>{this.$utils.postCallPgMethod({method:"user_list",params:Object.assign({search_fullname:e,per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>({label:e.fullname,value:e.fullname,user:e,avatar:e.avatar}))))}))}))}}};Y.render=B;const E=Y;function H(e,t,l,o,a,i){const n=(0,s.up)("q-breadcrumbs-el"),r=(0,s.up)("q-breadcrumbs"),d=(0,s.up)("q-separator");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(r,{gutter:"sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{label:e.$config.uiAppName,to:"/"},null,8,["label"]),((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)([].concat(...l.list),(e=>((0,s.wg)(),(0,s.j4)(n,{key:e.label,label:e.label,to:e.to,icon:i.icon(e)},null,8,["label","to","icon"])))),128))])),_:1}),(0,s.Wm)(d,{class:"q-mt-sm"})])}j()(Y,"components",{QSelect:z.Z,QItem:g.Z,QItemSection:w.Z});const K={props:["list"],methods:{icon(e){return"edit"===e.docType?"edit":e.icon||this.$config.breadcrumbIcons[e.docType]||"label"}}};var G=l(31481),J=l(85926),X=l(65869);K.render=H;const ee=K;j()(K,"components",{QBreadcrumbs:G.Z,QBreadcrumbsEl:J.Z,QSeparator:X.Z});const te=(0,s.Uk)("Удалить"),le=(0,s.Uk)("Восстановить"),se=(0,s.Wm)("span",{class:"q-ml-sm"},"Удалить?",-1);function oe(e,t,l,o,a,i){const n=(0,s.up)("q-tooltip"),r=(0,s.up)("q-btn"),d=(0,s.up)("q-item-section"),u=(0,s.up)("q-avatar"),c=(0,s.up)("q-card-section"),m=(0,s.up)("q-card-actions"),p=(0,s.up)("q-card"),h=(0,s.up)("q-dialog"),g=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[l.item.deleted?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,flat:"",round:"",icon:"delete_forever",onClick:t[1]||(t[1]=e=>a.isShowDeleteDialog=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[te])),_:1})])),_:1})),l.item.deleted?((0,s.wg)(),(0,s.j4)(r,{key:1,flat:"",round:"",icon:"check_circle_outline",onClick:i.update},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[le])),_:1})])),_:1},8,["onClick"])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(h,{modelValue:a.isShowDeleteDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.isShowDeleteDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),se])),_:1}),(0,s.Wm)(m,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Отмена"},null,512),[[g]]),(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Удалить",onClick:i.update},null,8,["onClick"]),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const ae={props:["item","updateMethod"],data(){return{list:[],isShowDeleteDialog:!1}},methods:{update(){this.updateMethod?this.$utils.postCallPgMethod({method:this.updateMethod,params:{id:this.item.id,deleted:!this.item.deleted}}).subscribe((e=>{e.ok&&this.$emit("success")})):this.$emit("success")}}};var ie=l(5363),ne=l(46778),re=l(10151),de=l(25589),ue=l(75096),ce=l(99367);ae.render=oe;const me=ae;j()(ae,"components",{QItemSection:w.Z,QBtn:b.Z,QTooltip:ie.Z,QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QAvatar:ue.Z,QCardActions:ce.Z}),j()(ae,"directives",{ClosePopup:$.Z});const pe={class:"row items-center justify-end"};function he(e,t,l,o,a,i){const n=(0,s.up)("q-btn"),r=(0,s.up)("q-date"),d=(0,s.up)("q-popup-proxy"),u=(0,s.up)("q-icon"),c=(0,s.up)("q-input"),m=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(c,{dense:l.dense,outlined:"",label:l.label,modelValue:a.date,"onUpdate:modelValue":t[2]||(t[2]=e=>a.date=e),readonly:l.readonly,mask:"##-##-####"},(0,s.Nv)({_:2},[l.is_remove?{name:"append",fn:(0,s.w5)((()=>[(0,s.Wm)(n,{round:"",flat:"",size:"sm",icon:"clear",onClick:i.clear},null,8,["onClick"])]))}:void 0,l.readonly?void 0:{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:a.date,"onUpdate:modelValue":t[1]||(t[1]=e=>a.date=e),mask:"DD-MM-YYYY",readonly:l.readonly},{default:(0,s.w5)((()=>[(0,s.Wm)("div",pe,[(0,s.wy)((0,s.Wm)(n,{label:"Ok",color:"primary",flat:""},null,512),[[m]])])])),_:1},8,["modelValue","readonly"])])),_:1},512)])),_:1})]))}]),1032,["dense","label","modelValue","readonly"])}var ge=l(25616);const we={props:["dateString","label","dense","is_remove","readonly"],data(){return{date:null}},watch:{dateString:function(e,t){e&&(this.date=e)},date:function(e,t){if(e&&e!==t){let t=ge.ZP.extractDate(e,"DD-MM-YYYY");if(ge.ZP.isBetweenDates(t,new Date(1900,1,1),new Date(2050,1,1))){let e=ge.ZP.formatDate(t,"YYYY-MM-DDTHH:mm:ss");this.$emit("update",e)}}}},methods:{clear(){this.$emit("clear"),this.date=null}},mounted(){this.dateString&&(this.date=this.dateString)}};var fe=l(83944),be=l(85626);we.render=he;const ye=we;j()(we,"components",{QInput:k.Z,QBtn:b.Z,QIcon:v.Z,QPopupProxy:fe.Z,QDate:be.Z}),j()(we,"directives",{ClosePopup:$.Z});const ke={class:"row items-center justify-end"},ve={class:"row items-center justify-end"};function _e(e,t,l,o,a,i){const n=(0,s.up)("q-btn"),r=(0,s.up)("q-date"),d=(0,s.up)("q-popup-proxy"),u=(0,s.up)("q-icon"),c=(0,s.up)("q-time"),m=(0,s.up)("q-input"),p=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(m,{outlined:"",label:l.label,modelValue:a.date,"onUpdate:modelValue":t[3]||(t[3]=e=>a.date=e),readonly:l.readonly,mask:"##-##-#### ##:##"},(0,s.Nv)({_:2},[l.readonly?void 0:{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:a.date,"onUpdate:modelValue":t[1]||(t[1]=e=>a.date=e),mask:"DD-MM-YYYY",readonly:l.readonly},{default:(0,s.w5)((()=>[(0,s.Wm)("div",ke,[(0,s.wy)((0,s.Wm)(n,{label:"Ok",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue","readonly"])])),_:1},512)])),_:1})]))},l.readonly?void 0:{name:"append",fn:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"access_time",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:a.date,"onUpdate:modelValue":t[2]||(t[2]=e=>a.date=e),mask:"DD-MM-YYYY HH:mm",format24h:""},{default:(0,s.w5)((()=>[(0,s.Wm)("div",ve,[(0,s.wy)((0,s.Wm)(n,{label:"Ok",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})]))}]),1032,["label","modelValue","readonly"])}const qe={props:["dateString","label","readonly"],data(){return{date:null}},watch:{date:function(e,t){if(e!==t){let t=ge.ZP.extractDate(e,"DD-MM-YYYY HH:mm");if(ge.ZP.isBetweenDates(t,new Date(1900,1,1),new Date(2050,1,1))){let e=ge.ZP.formatDate(t,"YYYY-MM-DDTHH:mm:ss");this.$emit("update",e)}}}},mounted(){this.dateString&&(this.date=this.dateString)}};var xe=l(35990);qe.render=_e;const je=qe;j()(qe,"components",{QInput:k.Z,QIcon:v.Z,QPopupProxy:fe.Z,QDate:be.Z,QBtn:b.Z,QTime:xe.Z}),j()(qe,"directives",{ClosePopup:$.Z});const We={class:"q-py-md"};function Ze(e,t,l,o,a,i){const n=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.j4)("div",We,[l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(n,{key:0,color:"secondary",label:"сохранить",class:"q-mr-sm",onClick:t[1]||(t[1]=t=>e.$emit("save"))})),(0,s.Wm)(n,{outline:"",color:"secondary",label:"отмена",onClick:t[2]||(t[2]=t=>e.$emit("cancel"))})])}const Se={props:["readonly"]};Se.render=Ze;const Qe=Se;j()(Se,"components",{QBtn:b.Z});const Ce=(0,s.Uk)(" No results ");function Ue(e,t,l,o,a,i){const n=(0,s.up)("q-item-section"),r=(0,s.up)("q-item"),d=(0,s.up)("q-select");return(0,s.wg)(),(0,s.j4)(d,{outlined:"",modelValue:a.localUser,"onUpdate:modelValue":t[1]||(t[1]=e=>a.localUser=e),"use-input":"","fill-input":"","emit-value":"","map-options":"",multiple:"","use-chips":"",label:l.label,options:a.options},{"no-option":(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"text-grey"},{default:(0,s.w5)((()=>[Ce])),_:1})])),_:1})])),_:1},8,["modelValue","label","options"])}const De={props:{userIds:{type:Array},label:{type:String}},data(){return{localUser:[],options:[],filterOptions:[]}},watch:{localUser:function(e){e&&this.$emit("update",e)}},methods:{filterFn(e,t){t((()=>{if(""===e)this.filterOptions=this.options;else{const t=e.toLowerCase();this.filterOptions=this.options.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}}))}},mounted(){this.$utils.postCallPgMethod({method:"user_list",params:Object.assign({per_page:1e3,order_by:"fullname asc"})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>({label:`${e.fullname}`,value:e.id}))),this.userIds&&(this.localUser=this.userIds),this.$forceUpdate())}))}};De.render=Ue;const $e=De;j()(De,"components",{QSelect:z.Z,QItem:g.Z,QItemSection:w.Z});const Ie=(0,s.Uk)(" Ничего не найдено ");function Fe(e,t,l,o,a,i){const n=(0,s.up)("q-avatar"),r=(0,s.up)("router-link"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-icon"),c=(0,s.up)("q-item-section"),m=(0,s.up)("q-item-label"),p=(0,s.up)("q-item"),h=(0,s.up)("q-select");return(0,s.wg)(),(0,s.j4)(h,{outlined:"",modelValue:a.localItem,"onUpdate:modelValue":t[2]||(t[2]=e=>a.localItem=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:a.options,onFilter:i.filterFn,readonly:l.readonly,dense:l.dense},(0,s.Nv)({append:(0,s.w5)((()=>[l.ext&&l.ext.addNewUrl&&!l.readonly?((0,s.wg)(),(0,s.j4)(d,{key:0,round:"",dense:"",flat:"",icon:"add",onClick:i.openNewTab},null,8,["onClick"])):(0,s.kq)("",!0),l.ext&&l.ext.isClearable&&a.localItem.label&&!l.readonly?((0,s.wg)(),(0,s.j4)(u,{key:1,name:"cancel",onClick:(0,s.iM)(i.clear,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):(0,s.kq)("",!0)])),option:(0,s.w5)((e=>[(0,s.Wm)(p,e.itemProps,{default:(0,s.w5)((()=>[e.opt.icon?((0,s.wg)(),(0,s.j4)(c,{key:0,avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{name:e.opt.icon},null,8,["name"])])),_:2},1024)):(0,s.kq)("",!0),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{innerHTML:e.opt.label},null,8,["innerHTML"]),l.ext&&l.ext.descriptionFunc?((0,s.wg)(),(0,s.j4)(m,{key:0,caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(l.ext.descriptionFunc(e.opt.item)),1)])),_:2},1024)):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1040)])),"no-option":(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"text-grey"},{default:(0,s.w5)((()=>[Ie])),_:1})])),_:1})])),_:2},[l.ext&&l.ext.pathUrl?{name:"before",fn:(0,s.w5)((()=>[a.localItem&&a.localItem.id||l.itemId?((0,s.wg)(),(0,s.j4)(r,{key:0,to:l.ext.pathUrl+"/"+(a.localItem&&a.localItem.id||l.itemId),style:{cursor:"pointer"}},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)("img",{src:l.ext.avatar},null,8,["src"])])),_:1})])),_:1},8,["to"])):((0,s.wg)(),(0,s.j4)(n,{key:1,rounded:"",style:{opacity:"0.7"}},{default:(0,s.w5)((()=>[(0,s.Wm)("img",{src:l.ext.avatar},null,8,["src"])])),_:1}))]))}:void 0,l.ext&&l.ext.isSaveBtn&&a.localItem.label&&!l.readonly?{name:"after",fn:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"save",onClick:t[1]||(t[1]=t=>e.$emit("save")),class:"cursor-pointer",color:"primary"})]))}:void 0]),1032,["modelValue","label","options","onFilter","readonly","dense"])}const Ve={props:{itemId:{type:Number},item:{type:String},label:{type:String},ext:{type:Object},readonly:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},itemTitleFldName:{type:String,default:"title"},pgMethod:{type:String}},data(){return{localItem:{},options:[]}},created(){var e;const t=this.item?this.item:null;this.localItem={label:t,value:(null===(e=this.ext)||void 0===e?void 0:e.value)||t}},watch:{localItem:function(e){e&&e.id&&this.$emit("update",{id:e.id,item:e})}},methods:{clear(){this.localItem={label:null,value:null},this.$emit("clear")},filterFn(e,t,l){t((()=>{this.$utils.postCallPgMethod({method:this.pgMethod,params:Object.assign({search_text:e,per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>{var t,l;let s=e[this.itemTitleFldName];return null!==(t=this.ext)&&void 0!==t&&t.itemTitleFunc&&(s=this.ext.itemTitleFunc(e)),{label:s,value:`${e[null!==(l=this.ext)&&void 0!==l&&l.itemValueFldName?this.ext.itemValueFldName:this.itemTitleFldName]}`,id:e.id,item:e}})))}))}))},openNewTab(){window.open(this.ext.addNewUrl,"_blank")}},mounted(){this.$utils.postCallPgMethod({method:this.pgMethod,params:Object.assign({search_text:"",per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>{var t;let l=e[this.itemTitleFldName];return null!==(t=this.ext)&&void 0!==t&&t.itemTitleFunc&&(l=this.ext.itemTitleFunc(e)),{label:l,value:e[this.itemTitleFldName],id:e.id,item:e}})))}))}};Ve.render=Fe;const Te=Ve;j()(Ve,"components",{QSelect:z.Z,QAvatar:ue.Z,QBtn:b.Z,QIcon:v.Z,QItem:g.Z,QItemSection:w.Z,QItemLabel:f.Z});const Le=(0,s.Uk)(" Ничего не найдено ");function Ne(e,t,l,o,a,i){const n=(0,s.up)("q-btn"),r=(0,s.up)("q-item-section"),d=(0,s.up)("q-item"),u=(0,s.up)("q-select"),c=(0,s.up)("q-input"),m=(0,s.up)("q-card-section"),p=(0,s.up)("q-card-actions"),h=(0,s.up)("q-card"),g=(0,s.up)("q-dialog"),w=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(u,{outlined:"",modelValue:a.localItem,"onUpdate:modelValue":t[2]||(t[2]=e=>a.localItem=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:a.options,onFilter:i.filterFn,readonly:l.readonly},(0,s.Nv)({"no-option":(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"text-grey"},{default:(0,s.w5)((()=>[Le])),_:1})])),_:1})])),_:2},[l.ext&&l.ext.isHideAddBtn?void 0:{name:"append",fn:(0,s.w5)((()=>[(0,s.Wm)(n,{round:"",dense:"",flat:"",icon:"add",onClick:t[1]||(t[1]=e=>a.isShowDialog=!0)})]))}]),1032,["modelValue","label","options","onFilter","readonly"]),(0,s.Wm)(g,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.isShowDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{style:{"min-width":"350px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{outlined:"",label:"Название города",modelValue:a.newCityName,"onUpdate:modelValue":t[3]||(t[3]=e=>a.newCityName=e)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(m),(0,s.Wm)(p,{align:"right",class:"text-primary"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(n,{flat:"",label:"Отмена"},null,512),[[w]]),(0,s.wy)((0,s.Wm)(n,{flat:"",label:"Добавить",onClick:i.add},null,8,["onClick"]),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const Pe={props:{item:{type:String},ajaxSelectTitle:{type:String},label:{type:String},ext:{type:Object},readonly:{type:Boolean,default:!1}},data(){return{localItem:{},options:[],isShowDialog:!1,newCityName:null}},created(){const e=this.ajaxSelectTitle?this.ajaxSelectTitle:null;this.localItem={label:e,value:e}},watch:{localItem:function(e){e&&e.id&&this.$emit("update",e.id)}},methods:{filterFn(e,t,l){t((()=>{this.$utils.postCallPgMethod({method:"city_list",params:Object.assign({search_text:e,per_page:20},this.ext?this.ext:{})}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.options=e.result.map((e=>({label:e.title,value:e.title,id:e.id}))))}))}))},add(){this.$utils.postCallPgMethod({method:"city_update",params:{id:-1,title:this.newCityName},isShowError:!1}).subscribe((e=>{if(e.ok){const t=e.result;this.localItem={label:t.title,value:t.id},this.newCityName=null}else e.message.includes("city_already_exist")&&(e.message="Город с таким назваанием уже существует"),this.$q.notify({color:"negative",position:"bottom",message:e.message})}))}}};Pe.render=Ne;const Me=Pe;function ze(e,t,l,o,a,i){const n=(0,s.up)("q-input");return(0,s.wg)(),(0,s.j4)(n,{outlined:"",label:l.label,modelValue:a.localItem,"onUpdate:modelValue":t[1]||(t[1]=e=>a.localItem=e),autogrow:""},null,8,["label","modelValue"])}j()(Pe,"components",{QSelect:z.Z,QBtn:b.Z,QItem:g.Z,QItemSection:w.Z,QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QInput:k.Z,QCardActions:ce.Z}),j()(Pe,"directives",{ClosePopup:$.Z});const Oe={props:{label:{},fld:{},ext:null,readonly:null,columnClass:{default:"col-xs-12 col-sm-6 col-md-4"},icon:null,vif:{default:!0}},data(){return{localItem:null}},watch:{localItem:function(){this.update()}},methods:{update(){this.$emit("update",{text:this.localItem})}},mounted(){this.fld&&(this.localItem=this.fld.text)}};Oe.render=ze;const Re=Oe;j()(Oe,"components",{QInput:k.Z});const Ae=(0,s.Wm)("img",{src:"https://image.flaticon.com/icons/svg/1037/1037308.svg"},null,-1),Be=(0,s.Uk)("Удалить"),Ye=(0,s.Wm)("span",{class:"q-ml-sm"},"Удалить?",-1);function Ee(e,t,l,o,a,i){const n=(0,s.up)("q-space"),r=(0,s.up)("q-btn"),d=(0,s.up)("q-bar"),u=(0,s.up)("q-avatar"),c=(0,s.up)("q-item-section"),m=(0,s.up)("q-item-label"),p=(0,s.up)("q-tooltip"),h=(0,s.up)("q-item"),g=(0,s.up)("q-list"),w=(0,s.up)("q-uploader"),f=(0,s.up)("q-dialog"),b=(0,s.up)("q-card-section"),y=(0,s.up)("q-card-actions"),k=(0,s.up)("q-card"),v=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(d,{class:"bg-secondary text-white shadow-2"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",null,(0,s.zw)(l.label),1),(0,s.Wm)(n),a.isShowList&&a.list.length>0?((0,s.wg)(),(0,s.j4)(r,{key:0,dense:"",flat:"",icon:"expand_less",onClick:t[1]||(t[1]=e=>a.isShowList=!1)})):(0,s.kq)("",!0),!a.isShowList&&a.list.length>0?((0,s.wg)(),(0,s.j4)(r,{key:1,dense:"",flat:"",icon:"expand_more",onClick:t[2]||(t[2]=e=>a.isShowList=!0)})):(0,s.kq)("",!0),l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:2,dense:"",flat:"",icon:"add",onClick:t[3]||(t[3]=e=>a.isShowDialog=!0)}))])),_:1}),a.isShowList?((0,s.wg)(),(0,s.j4)(g,{key:0,bordered:"",separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(i.filteredList,(e=>((0,s.wg)(),(0,s.j4)(h,{key:e.filename},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{avatar:"",onClick:t=>i.downloadFile(e)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{rounded:""},{default:(0,s.w5)((()=>[Ae])),_:1})])),_:2},1032,["onClick"]),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.filename),1)])),_:2},1024)])),_:2},1024),l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(c,{key:0,side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{flat:"",round:"",icon:"delete",size:"sm",onClick:t=>i.showDeleteDialog(e.filename)},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[Be])),_:1})])),_:2},1032,["onClick"])])),_:2},1024))])),_:2},1024)))),128))])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(f,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.isShowDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{ref:"uploader",label:"Выберите файл для загрузки","auto-upload":"",url:i.uploadUrl,headers:i.headers,accept:l.ext&&l.ext.accept?l.ext.accept:"","max-file-size":l.ext&&l.ext.maxFileSize?l.ext.maxFileSize:1e7,onRejected:i.rejected,onUploaded:i.uploaded,onFailed:i.failed,"form-fields":[{name:"tableName",value:l.ext.tableName},{name:"tableId",value:l.ext.tableId}]},null,8,["url","headers","accept","max-file-size","onRejected","onUploaded","onFailed","form-fields"])])),_:1},8,["modelValue"]),(0,s.Wm)(f,{modelValue:a.isShowDeleteDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>a.isShowDeleteDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),Ye])),_:1}),(0,s.Wm)(y,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Отмена"},null,512),[[v]]),(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Удалить",onClick:i.remove},null,8,["onClick"]),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var He=l(30052),Ke=l.n(He);const Ge={props:{fld:{},fldName:{default:"files"},label:{},readonly:null,icon:null,vif:{default:!0},ext:null},computed:{uploadUrl(){return`${this.$config.apiUrl()}/api/upload_file`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},filteredList:function(){return this.list.filter((e=>!e.deleted))}},data(){return{isShowDialog:!1,isShowList:!0,list:[],isShowDeleteDialog:!1,selectedForDeleteFilename:null}},methods:{uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?(this.$refs.uploader.reset(),this.isShowDialog=!1,this.list.find((e=>e.filename===t.result.filename&&!e.deleted))||(this.list.push(t.result),this.$utils.postCallPgMethod({method:`${this.ext.tableName}_update`,params:{id:this.ext.tableId,[this.fldName]:this.list}}).subscribe((e=>{this.$emit("update",this.list)})))):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})},rejected(e){const t=e=>{const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0,s=parseInt(e,10)||0;while(s>=1024&&++l)s/=1024;return s.toFixed(s<10&&l>0?1:0)+" "+t[l]};let l="данный файл не соответствует ограничениям";if(e.length>0&&"accept"===e[0].failedPropValidation&&(l=`Допустимы только файлы с раширением: ${this.ext.accept} `),e.length>0&&"max-file-size"===e[0].failedPropValidation){let e=t(this.ext.maxFileSize||1e7);l=`Допустимы только файлы не больше: ${e}`}this.$q.notify({color:"negative",position:"bottom",message:l})},downloadFile(e){Ke()({url:`${this.$config.apiUrl()}${e.url}`,method:"GET",headers:{"Auth-token":localStorage.getItem(this.$config.appName)},responseType:"blob"}).then((t=>{const l=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=l,s.setAttribute("download",e.filename),document.body.appendChild(s),s.click()})).catch((e=>{let t=e.response.data;e.response.data&&(t=e.response.data.message,"not found"===t&&(t="файл с такой ссылкой не найден")),this.$q.notify({message:t,type:"negative",position:"top-right"})}))},showDeleteDialog(e){this.selectedForDeleteFilename=e,this.isShowDeleteDialog=!0},remove(){let e=this.list.findIndex((e=>e.filename===this.selectedForDeleteFilename&&!e.deleted));this.list[e].deleted=!0;const t=this.list[e].url.split("/",-1).slice(-1);let l=this.list.splice(e,1);this.list.push(l[0]),this.$utils.postApiRequest({url:`/api/remove_file/${t}`}).subscribe((e=>{e.ok&&(this.selectedForDeleteFilename=null)})),this.$utils.postCallPgMethod({method:`${this.ext.tableName}_update`,params:{id:this.ext.tableId,[this.fldName]:this.list}}).subscribe((e=>{this.$emit("update",this.list)}))}},mounted(){if(!this.ext)throw new Error('compFldFiles missed param: "ext"');if(!this.ext.tableName)throw new Error('compFldFiles missed param: "ext.tableName"');if(!this.ext.tableId)throw new Error('compFldFiles missed param: "ext.tableId"');this.list=this.fld||[],Ke().interceptors.response.use((e=>e),(e=>"blob"===e.request.responseType&&e.response.data instanceof Blob&&e.response.data.type&&-1!==e.response.data.type.toLowerCase().indexOf("json")?new Promise(((t,l)=>{let s=new FileReader;s.onload=()=>{e.response.data=JSON.parse(s.result),t(Promise.reject(e))},s.onerror=()=>{l(e)},s.readAsText(e.response.data)})):Promise.reject(e)))}};var Je=l(10846),Xe=l(62025),et=l(37833);Ge.render=Ee;const tt=Ge;j()(Ge,"components",{QBar:Je.Z,QSpace:Xe.Z,QBtn:b.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z,QAvatar:ue.Z,QItemLabel:f.Z,QTooltip:ie.Z,QDialog:ne.Z,QUploader:et.Z,QCard:re.Z,QCardSection:de.Z,QCardActions:ce.Z}),j()(Ge,"directives",{ClosePopup:$.Z});const lt={class:"q-gutter-md row items-start",style:{position:"relative"}},st={key:0,class:"absolute-top-left text-subtitle2"},ot=(0,s.Uk)("Загрузить фото"),at=(0,s.Uk)("Удалить фото"),it=(0,s.Wm)("span",{class:"q-ml-sm"},"Удалить?",-1);function nt(e,t,l,o,a,i){const n=(0,s.up)("comp-stat-img-src"),r=(0,s.up)("q-tooltip"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-uploader"),c=(0,s.up)("q-dialog"),m=(0,s.up)("q-avatar"),p=(0,s.up)("q-card-section"),h=(0,s.up)("q-card-actions"),g=(0,s.up)("q-card"),w=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)("div",lt,[(0,s.Wm)(n,{src:a.localSrc},{default:(0,s.w5)((()=>[l.label?((0,s.wg)(),(0,s.j4)("div",st,(0,s.zw)(l.label),1)):(0,s.kq)("",!0)])),_:1},8,["src"]),(0,s.Wm)(d,{outline:"",round:"",icon:"add",color:"grey",onClick:t[1]||(t[1]=e=>a.isShowDialog=!0),class:"absolute-top-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[ot])),_:1})])),_:1}),(0,s.Wm)(d,{outline:"",round:"",size:"sm",icon:"delete",color:"grey",onClick:t[2]||(t[2]=e=>a.isShowDeleteDialog=!0),class:"absolute-bottom-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[at])),_:1})])),_:1})]),(0,s.Wm)(c,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>a.isShowDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{ref:"uploader",label:"Выберите файл для загрузки","auto-upload":"",url:i.uploadUrl,headers:i.headers,accept:l.ext&&l.ext.accept?l.ext.accept:"","max-file-size":l.ext&&l.ext.maxFileSize?l.ext.maxFileSize:1e7,onRejected:i.rejected,onUploaded:i.uploaded,onFailed:i.failed,"form-fields":i.formField},null,8,["url","headers","accept","max-file-size","onRejected","onUploaded","onFailed","form-fields"])])),_:1},8,["modelValue"]),(0,s.Wm)(c,{modelValue:a.isShowDeleteDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.isShowDeleteDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),it])),_:1}),(0,s.Wm)(h,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(d,{flat:"",label:"Отмена"},null,512),[[w]]),(0,s.wy)((0,s.Wm)(d,{flat:"",label:"Удалить",onClick:i.remove},null,8,["onClick"]),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const rt={props:{fld:{},label:{},readonly:null,icon:null,vif:{default:!0},ext:{}},computed:{uploadUrl:function(){return`${this.$config.apiUrl()}/api/${this.ext.uploadUrl||"upload_image"}`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},formField:function(){let e=[{name:"tableName",value:this.ext.tableName},{name:"tableId",value:this.ext.tableId}];return this.ext.width&&e.push({name:"width",value:this.ext.width}),this.ext.crop&&e.push({name:"crop",value:this.ext.crop}),e}},data(){return{isShowDialog:!1,isShowDeleteDialog:!1,localSrc:null}},watch:{fld(e){e&&(this.localSrc=e)}},methods:{uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?(this.localSrc=t.result.file,this.$refs.uploader.reset(),this.isShowDialog=!1,this.$emit("update",this.localSrc),this.ext.fldName&&this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.localSrc}}).subscribe((e=>{}))):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})},rejected(e){const t=e=>{const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0,s=parseInt(e,10)||0;while(s>=1024&&++l)s/=1024;return s.toFixed(s<10&&l>0?1:0)+" "+t[l]};let l="данный файл не соответствует ограничениям";if(e.length>0&&"accept"===e[0].failedPropValidation&&(l=`Допустимы только файлы с раширением: ${this.ext.accept} `),e.length>0&&"max-file-size"===e[0].failedPropValidation){let e=t(this.ext.maxFileSize||1e7);l=`Допустимы только файлы не больше: ${e}`}this.$q.notify({color:"negative",position:"bottom",message:l})},remove(){this.ext.fldName?this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:null}}).subscribe((e=>{this.localSrc=null,this.$emit("update",null)})):(this.localSrc=null,this.$emit("update",null))}},mounted(){if(!this.ext)throw new Error('compFldFiles missed param: "ext"');if(!this.ext.methodUpdate&&(!this.ext.tableId||!this.ext.tableName))throw new Error('compFldFiles missed param: "ext.methodUpdate" OR "ext.tableId" AND "ext.tableName"');this.localSrc=this.fld||null}};rt.render=nt;const dt=rt;j()(rt,"components",{QBtn:b.Z,QTooltip:ie.Z,QDialog:ne.Z,QUploader:et.Z,QCard:re.Z,QCardSection:de.Z,QAvatar:ue.Z,QCardActions:ce.Z}),j()(rt,"directives",{ClosePopup:$.Z});const ut={class:"text-caption"},ct={class:"q-gutter-md row items-start"},mt=(0,s.Uk)("Удалить фото"),pt=(0,s.Uk)("Поменять местами"),ht=(0,s.Uk)("Добавить фото"),gt=(0,s.Uk)("Добавить ссылку"),wt=(0,s.Wm)("span",{class:"q-ml-sm"},"Удалить?",-1);function ft(e,t,l,o,a,i){const n=(0,s.up)("q-btn"),r=(0,s.up)("q-tooltip"),d=(0,s.up)("comp-stat-img-src"),u=(0,s.up)("q-uploader"),c=(0,s.up)("q-dialog"),m=(0,s.up)("q-img"),p=(0,s.up)("q-input"),h=(0,s.up)("q-card-section"),g=(0,s.up)("q-card-actions"),w=(0,s.up)("q-card"),f=(0,s.up)("q-avatar"),b=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)("p",ut,(0,s.zw)(l.label),1),(0,s.Wm)("div",ct,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.list,((e,t)=>((0,s.wg)(),(0,s.j4)(d,{key:e.file,src:e.file,onError:t=>i.imgSrcError(e.file,t),style:{width:"150px"}},{default:(0,s.w5)((()=>[(0,s.Wm)("a",{href:i.imgUrl(e.file),target:"_blank"},[(0,s.Wm)(n,{flat:"",round:"",size:"sm",icon:"link",color:"white",class:"absolute-top-right"})],8,["href"]),l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(n,{key:0,flat:"",round:"",size:"sm",icon:"delete",color:"white",onClick:t=>i.showDeleteDialog(e.file),class:"absolute-bottom-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[mt])),_:1})])),_:2},1032,["onClick"])),!l.readonly&&t>0?((0,s.wg)(),(0,s.j4)(n,{key:1,flat:"",round:"",size:"sm",icon:"keyboard_backspace",color:"white",onClick:l=>i.moveLeft(e.file,t),class:"absolute-bottom-left"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[pt])),_:1})])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])),_:2},1032,["src","onError"])))),128)),l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(n,{key:0,flat:"",round:"",icon:"add",size:"sm",onClick:t[1]||(t[1]=e=>a.isShowDialog=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[ht])),_:1})])),_:1})),!l.readonly&&l.ext&&l.ext.canAddUrls?((0,s.wg)(),(0,s.j4)(n,{key:1,size:"sm",flat:"",round:"",icon:"add",onClick:t[2]||(t[2]=e=>a.isShowDialogAddUrl=!0)},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[gt])),_:1})])),_:1})):(0,s.kq)("",!0)]),(0,s.Wm)(c,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>a.isShowDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{ref:"uploader",label:"Выберите файл для загрузки",multiple:"",url:i.uploadUrl,headers:i.headers,accept:l.ext&&l.ext.accept?l.ext.accept:"","max-file-size":l.ext&&l.ext.maxFileSize?l.ext.maxFileSize:1e7,onRejected:i.rejected,onUploaded:i.uploaded,onFailed:i.failed,onFinish:i.finish,"form-fields":i.formField},null,8,["url","headers","accept","max-file-size","onRejected","onUploaded","onFailed","onFinish","form-fields"])])),_:1},8,["modelValue"]),(0,s.Wm)(c,{modelValue:a.isShowDialogAddUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>a.isShowDialogAddUrl=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{style:{width:"300px"},class:"q-px-sm q-pb-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{src:a.newImgUrl?a.newImgUrl:"https://www.cowgirlcontractcleaning.com/wp-content/uploads/sites/360/2018/05/placeholder-img-4.jpg"},null,8,["src"]),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{modelValue:a.newImgUrl,"onUpdate:modelValue":t[4]||(t[4]=e=>a.newImgUrl=e),label:"ссылка на фото"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(g,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(n,{flat:"",label:"Отмена"},null,512),[[b]]),(0,s.wy)((0,s.Wm)(n,{flat:"",label:"Ок",onClick:i.addImgUrl},null,8,["onClick"]),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(c,{modelValue:a.isShowDeleteDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>a.isShowDeleteDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),wt])),_:1}),(0,s.Wm)(g,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(n,{flat:"",label:"Отмена"},null,512),[[b]]),(0,s.wy)((0,s.Wm)(n,{flat:"",label:"Удалить",onClick:i.remove},null,8,["onClick"]),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const bt={props:{fld:{},label:{},readonly:null,icon:null,vif:{default:!0},ext:{}},computed:{uploadUrl:function(){return`${this.$config.apiUrl()}/api/${this.ext.uploadUrl||"upload_image"}`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},formField:function(){let e=[{name:"tableName",value:this.ext.tableName},{name:"tableId",value:this.ext.tableId}];return this.ext.width&&e.push({name:"width",value:this.ext.width}),this.ext.crop&&e.push({name:"crop",value:this.ext.crop}),e},imgUrl:function(){return e=>e.includes("http")?e:`${this.$config.apiUrl()}${e}`}},data(){return{isShowDialog:!1,list:[],isShowDeleteDialog:!1,isShowDialogAddUrl:!1,selectedForDeleteFilename:null,newImgUrl:null}},methods:{uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?this.list.push(t.result):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})},rejected(e){const t=e=>{const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let l=0,s=parseInt(e,10)||0;while(s>=1024&&++l)s/=1024;return s.toFixed(s<10&&l>0?1:0)+" "+t[l]};let l="данный файл не соответствует ограничениям";if(e.length>0&&"accept"===e[0].failedPropValidation&&(l=`Допустимы только файлы с раширением: ${this.ext.accept} `),e.length>0&&"max-file-size"===e[0].failedPropValidation){let e=t(this.ext.maxFileSize||1e7);l=`Допустимы только файлы не больше: ${e}`}this.$q.notify({color:"negative",position:"bottom",message:l})},showDeleteDialog(e){this.selectedForDeleteFilename=e,this.isShowDeleteDialog=!0},imgSrcError(e,t){this.$q.notify({color:"negative",position:"bottom",message:`ошибка: url "${e}" не является ссылкой на фото `}),this.selectedForDeleteFilename=e,this.remove()},moveLeft(e,t){let l=this.list[t];this.list[t]=this.list[t-1],this.$set(this.list,t-1,l),this.$emit("update",this.list)},remove(){let e=this.list.findIndex((e=>e.file===this.selectedForDeleteFilename&&!e.deleted));this.list[e].deleted=!0;let t=this.list.splice(e,1);this.list.push(t[0]),this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.list}}).subscribe((e=>{this.$emit("update",this.list)}))},addImgUrl:function(){this.isShowDialog=!1,this.list.push({file:this.newImgUrl}),this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.list}}).subscribe((e=>{e.ok&&(this.newImgUrl=null)}))},finish(){this.$refs.uploader.reset(),this.isShowDialog=!1,this.$emit("update",this.list),this.$utils.postCallPgMethod({method:`${this.ext.methodUpdate||this.ext.tableName+"_update"}`,params:{id:this.ext.tableId,[this.ext.fldName]:this.list}}).subscribe((e=>{}))}},mounted(){if(!this.readonly){if(!this.ext)throw new Error('compFldFiles missed param: "ext"');if(!this.ext.fldName)throw new Error('compFldFiles missed param: "ext.fldName"');if(!this.ext.methodUpdate&&(!this.ext.tableId||!this.ext.tableName))throw new Error('compFldFiles missed param: "ext.methodUpdate" OR "ext.tableId" AND "ext.tableName"')}this.fld?this.list=this.fld.filter((e=>!e.deleted)):this.list=[]}};var yt=l(24152);bt.render=ft;const kt=bt;j()(bt,"components",{QBtn:b.Z,QTooltip:ie.Z,QDialog:ne.Z,QUploader:et.Z,QCard:re.Z,QImg:yt.Z,QCardSection:de.Z,QInput:k.Z,QCardActions:ce.Z,QAvatar:ue.Z}),j()(bt,"directives",{ClosePopup:$.Z});const vt={key:0},_t={class:"row q-col-gutter-md q-mb-sm"},qt={class:"col-12"},xt=(0,s.Uk)("показать на карте");function jt(e,t,l,o,a,i){const n=(0,s.up)("comp-dadata-address-dialog"),r=(0,s.up)("q-tooltip"),d=(0,s.up)("q-icon"),u=(0,s.up)("q-input");return(0,s.wg)(),(0,s.j4)("div",null,[a.item?((0,s.wg)(),(0,s.j4)("div",vt,[(0,s.Wm)(n,{ref:"addressDialog",onUpdate:i.updateAddress},null,8,["onUpdate"]),(0,s.Wm)("div",_t,[(0,s.Wm)("div",qt,[(0,s.Wm)(u,{outlined:"",label:"Адрес",modelValue:a.item.full,"onUpdate:modelValue":t[2]||(t[2]=e=>a.item.full=e)},(0,s.Nv)({append:(0,s.w5)((()=>[(0,s.Wm)(d,{name:"search",onClick:t[1]||(t[1]=t=>e.$refs.addressDialog.open())})])),_:2},[a.item.geo_lat?{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(d,{name:"place",onClick:i.openOnMap},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[xt])),_:1})])),_:1},8,["onClick"])]))}:void 0]),1032,["modelValue"])])])])):(0,s.kq)("",!0)])}const Wt={props:{fld:{},label:{},readonly:null},data(){return{item:null}},watch:{item:{handler(e){this.$emit("update",e)},deep:!0}},methods:{updateAddress(e){let t,l;if(Array.isArray(e)){if(!e[0])return;t=e[0].value,l=e[0].data}else t=e.value,l=e.data;const s=t,{city:o,region:a,area:i,street:n,postal_code:r,house:d,place:u,geo_lat:c,geo_lon:m}=l;this.item.full=s,this.item.geo_lat=c,this.item.geo_lon=m,this.item.source={city:o,region:a,area:i,street:n,postal_code:r,house:d,place:u}},openOnMap(){let e=window.open(`http://maps.yandex.ru/?text=${this.item.geo_lat},${this.item.geo_lon}`,"_blank");e.focus()}},mounted(){this.item=this.fld||{full:null}}};Wt.render=jt;const Zt=Wt;j()(Wt,"components",{QInput:k.Z,QIcon:v.Z,QTooltip:ie.Z});const St={key:0,class:"text-caption"},Qt={class:"text-h6"},Ct={class:"row q-col-gutter-md q-mb-sm"};function Ut(e,t,l,o,a,i){const n=(0,s.up)("q-icon"),r=(0,s.up)("q-input"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-item-label"),c=(0,s.up)("q-item-section"),m=(0,s.up)("q-item"),p=(0,s.up)("q-list"),h=(0,s.up)("q-card-section"),g=(0,s.up)("q-separator"),w=(0,s.up)("q-card-actions"),f=(0,s.up)("q-card"),b=(0,s.up)("q-dialog"),y=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(r,{label:l.label,modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=e=>a.search=e),outlined:"",debounce:"500"},{append:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"search"})])),_:1},8,["label","modelValue"]),(0,s.Wm)(p,{bordered:"",separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.resultList,((t,l)=>((0,s.wg)(),(0,s.j4)(m,{key:t.data.hid},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(l+1)+" ",1),(0,s.Wm)(d,{flat:"",round:"",size:"sm",icon:"add",onClick:l=>e.$emit("add",t)},null,8,["onClick"]),(0,s.Wm)(d,{flat:"",round:"",size:"sm",icon:"help_outline",onClick:e=>i.openDialogWithDetails(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(t.value),1)])),_:2},1024),(0,s.Wm)(u,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(t.data.inn)+" "+(0,s.zw)(t.data.address.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0==a.resultList.length?((0,s.wg)(),(0,s.j4)("p",St,"не найдено")):(0,s.kq)("",!0),a.selectedItem?((0,s.wg)(),(0,s.j4)(b,{key:1,modelValue:a.isShowDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.isShowDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",Qt,(0,s.zw)(a.selectedItem.value),1)])),_:1}),(0,s.Wm)(g),(0,s.Wm)(h,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.flds,(e=>((0,s.wg)(),(0,s.j4)("div",Ct,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.j4)(r,{outlined:"",key:e.name,label:e.label,value:e.value(a.selectedItem.data),readonly:"",class:e.class},null,8,["label","value","class"])))),128))])))),256))])),_:1}),(0,s.Wm)(g),(0,s.Wm)(w,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(d,{flat:"",label:"ok",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,s.kq)("",!0)])}var Dt=l(61764),$t=l(6720),It=l(15894),Ft=l(90319),Vt=l(42087),Tt=l(64434),Lt=l(31954);const Nt={props:{label:{type:String}},data(){return{search:"7707083893",resultList:[],selectedItem:null,isShowDialog:!1,flds:[[{value:e=>e.inn,label:"ИНН",class:"col-xs-12 col-sm-6"},{value:e=>e.kpp,label:"КПП",class:"col-xs-12 col-sm-6"}],[{value:e=>e.opf.full,label:"ОПФ",class:"col-xs-12 col-sm-6"},{value:e=>this.$t(`onecContragent.status_${e.state.status}`),label:"Статус",class:"col-xs-12 col-sm-6"}]]}},watch:{search(e){e&&e.length>0&&this.getList()}},methods:{getList(){Pt({query:this.search}).subscribe((e=>{e&&(e||(e=[]),this.resultList=e)}))},openDialogWithDetails(e){this.selectedItem=e,this.isShowDialog=!0}}},Pt=({query:e})=>(0,$t.h)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party",method:"POST",headers:Mt(),body:{query:e}}).pipe((0,It.q)(1),(0,Ft.U)(zt()),(0,Vt.K)(Ot())),Mt=()=>{let e={"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${Dt.Z.dadataToken}`};return e},zt=({successMsg:e}={})=>e=>{if(!e.response)throw new Error(e.response.message);return e.response.suggestions},Ot=e=>t=>{const l=t.response?t.response.message:t.message;return e&&Tt.Z.create({color:"negative",position:"top-right",message:l}),(0,Lt.of)({ok:!1,message:l})};Nt.render=Ut;const Rt=Nt;j()(Nt,"components",{QInput:k.Z,QIcon:v.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z,QItemLabel:f.Z,QBtn:b.Z,QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QSeparator:X.Z,QCardActions:ce.Z}),j()(Nt,"directives",{ClosePopup:$.Z});const At={key:0,class:"text-caption q-mb-none"},Bt={key:1,class:"text-caption q-mb-none"};function Yt(e,t,l,o,a,i){const n=(0,s.up)("q-icon"),r=(0,s.up)("q-input"),d=(0,s.up)("q-item-label"),u=(0,s.up)("q-item-section"),c=(0,s.up)("q-item"),m=(0,s.up)("q-list"),p=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(r,{dense:"",label:l.label,modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=e=>a.search=e),filled:"",debounce:"300"},(0,s.Nv)({append:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"search"})])),_:2},[a.isFirstSelected?{name:"prepend",fn:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"add",onClick:i.add},null,8,["onClick"])]))}:void 0]),1032,["label","modelValue"]),a.notFound?((0,s.wg)(),(0,s.j4)("p",At,"не найдено")):(0,s.kq)("",!0),a.resultList.length>1?((0,s.wg)(),(0,s.j4)("p",Bt,"выберите вариант из списка или продолжите ввод")):(0,s.kq)("",!0),a.resultList.length>0?((0,s.wg)(),(0,s.j4)(m,{key:2,bordered:"",separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.resultList,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(c,{key:e.data.hid,clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{onClick:t=>i.selectAddress(e)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(e.value),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1536)),[[p]]))),128))])),_:1})):(0,s.kq)("",!0)])}const Et={props:{label:{type:String}},data(){return{search:"",resultList:[],selectedItem:null,notFound:!1,isFirstSelected:!1}},watch:{search(e){e&&e.length>0&&this.getList()}},methods:{getList(){Ht({query:this.search}).subscribe((e=>{e&&(e||(e=[]),this.resultList=e,this.notFound=0===e.length,0===e.length&&(this.isFirstSelected=!1))}))},selectAddress(e){this.search=e.value,this.isFirstSelected=!0,this.$nextTick((()=>{1===this.resultList.length&&(this.resultList=[])}))},add(){Ht({query:this.search,count:1}).subscribe((e=>{e&&(this.resultList=[],this.search="",this.$emit("update",e))}))}}},Ht=({query:e,count:t=10})=>(0,$t.h)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",method:"POST",headers:Kt(),body:{query:e,count:t}}).pipe((0,It.q)(1),(0,Ft.U)(Gt()),(0,Vt.K)(Jt())),Kt=()=>{let e={"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${Dt.Z.dadataToken}`};return e},Gt=({successMsg:e}={})=>e=>{if(!e.response)throw new Error(e.response.message);return e.response.suggestions},Jt=e=>t=>{const l=t.response?t.response.message:t.message;return e&&Tt.Z.create({color:"negative",position:"top-right",message:l}),(0,Lt.of)({ok:!1,message:l})};var Xt=l(46489);Et.render=Yt;const el=Et;function tl(e,t,l,o,a,i){const n=(0,s.up)("comp-dadata-address"),r=(0,s.up)("q-card-section"),d=(0,s.up)("q-card"),u=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(u,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[1]||(t[1]=e=>a.isShowDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n,{label:"Поиск адреса",onUpdate:i.update,class:"q-mb-md"},null,8,["onUpdate"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}j()(Et,"components",{QInput:k.Z,QIcon:v.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z,QItemLabel:f.Z}),j()(Et,"directives",{Ripple:Xt.Z});const ll={props:{label:{type:String}},data(){return{isShowDialog:!1}},methods:{open(){this.isShowDialog=!0},update(e){this.$emit("update",e),this.isShowDialog=!1}}};ll.render=tl;const sl=ll;j()(ll,"components",{QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QCardActions:ce.Z,QBtn:b.Z}),j()(ll,"directives",{ClosePopup:$.Z});const ol={key:1,class:"text-caption"},al={class:"text-h6"},il={class:"row q-col-gutter-md q-mb-sm"};function nl(e,t,l,o,a,i){const n=(0,s.up)("q-icon"),r=(0,s.up)("q-input"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-item-label"),c=(0,s.up)("q-item-section"),m=(0,s.up)("q-item"),p=(0,s.up)("q-list"),h=(0,s.up)("q-card-section"),g=(0,s.up)("q-separator"),w=(0,s.up)("q-card-actions"),f=(0,s.up)("q-card"),b=(0,s.up)("q-dialog"),y=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)("div",null,[(0,s.Wm)(r,{label:l.label,modelValue:a.search,"onUpdate:modelValue":t[1]||(t[1]=e=>a.search=e),outlined:"",debounce:"500"},{append:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"search"})])),_:1},8,["label","modelValue"]),a.resultList.length>0?((0,s.wg)(),(0,s.j4)(p,{key:0,bordered:"",separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.resultList,((t,l)=>((0,s.wg)(),(0,s.j4)(m,{key:t.data.hid},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(l+1)+" ",1),(0,s.Wm)(d,{flat:"",round:"",size:"sm",icon:"add",onClick:l=>e.$emit("add",t)},null,8,["onClick"]),(0,s.Wm)(d,{flat:"",round:"",size:"sm",icon:"help_outline",onClick:e=>i.openDialogWithDetails(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(t.value),1)])),_:2},1024),(0,s.Wm)(u,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(t.data.inn)+" "+(0,s.zw)(t.data.address.value),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,s.kq)("",!0),a.notFound?((0,s.wg)(),(0,s.j4)("p",ol,"не найдено")):(0,s.kq)("",!0),a.selectedItem?((0,s.wg)(),(0,s.j4)(b,{key:2,modelValue:a.isShowDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.isShowDialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",al,(0,s.zw)(a.selectedItem.value),1)])),_:1}),(0,s.Wm)(g),(0,s.Wm)(h,{style:{"max-height":"50vh"},class:"scroll"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.flds,(e=>((0,s.wg)(),(0,s.j4)("div",il,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.j4)(r,{outlined:"",key:e.name,label:e.label,value:e.value(a.selectedItem.data),readonly:"",class:e.class},null,8,["label","value","class"])))),128))])))),256))])),_:1}),(0,s.Wm)(g),(0,s.Wm)(w,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(d,{flat:"",label:"ok",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,s.kq)("",!0)])}const rl={props:{label:{type:String}},data(){return{search:"",resultList:[],selectedItem:null,isShowDialog:!1,notFound:!1,flds:[[{value:e=>e.inn,label:"ИНН",class:"col-xs-12 col-sm-6"},{value:e=>e.kpp,label:"КПП",class:"col-xs-12 col-sm-6"}],[{value:e=>e.opf.full,label:"ОПФ",class:"col-xs-12 col-sm-6"},{value:e=>pl(e.state.status),label:"Статус",class:"col-xs-12 col-sm-6"}]]}},watch:{search(e){e&&e.length>0&&this.getList()}},methods:{getList(){dl({query:this.search}).subscribe((e=>{e&&(e||(e=[]),this.resultList=e,this.notFound=0===e.length)}))},openDialogWithDetails(e){this.selectedItem=e,this.isShowDialog=!0}}},dl=({query:e})=>(0,$t.h)({url:"https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party",method:"POST",headers:ul(),body:{query:e}}).pipe((0,It.q)(1),(0,Ft.U)(cl()),(0,Vt.K)(ml())),ul=()=>{let e={"Content-Type":"application/json",Accept:"application/json",Authorization:`Token ${Dt.Z.dadataToken}`};return e},cl=({successMsg:e}={})=>e=>{if(!e.response)throw new Error(e.response.message);return e.response.suggestions},ml=e=>t=>{const l=t.response?t.response.message:t.message;return e&&Tt.Z.create({color:"negative",position:"top-right",message:l}),(0,Lt.of)({ok:!1,message:l})},pl=e=>{switch(e){case"ACTIVE":return"действующая";case"LIQUIDATING":return"ликвидируется";case"LIQUIDATED":return"ликвидирована";case"REORGANIZING":return"в процессе присоединения к другому юрлицу";default:return e}};rl.render=nl;const hl=rl;j()(rl,"components",{QInput:k.Z,QIcon:v.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z,QItemLabel:f.Z,QBtn:b.Z,QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QSeparator:X.Z,QCardActions:ce.Z}),j()(rl,"directives",{ClosePopup:$.Z});const gl=(0,s.Uk)(" Ничего не найдено ");function wl(e,t,l,o,a,i){const n=(0,s.up)("q-item-section"),r=(0,s.up)("q-item"),d=(0,s.up)("q-select");return(0,s.wg)(),(0,s.j4)(d,{outlined:"",modelValue:a.item,"onUpdate:modelValue":t[1]||(t[1]=e=>a.item=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"300",label:l.label,options:a.options,onFilter:i.filterFn},{"no-option":(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"text-grey"},{default:(0,s.w5)((()=>[gl])),_:1})])),_:1})])),_:1},8,["modelValue","label","options","onFilter"])}const fl={props:{label:{},pgMethod:{},title:{},ext:{},existIds:{}},data(){return{item:null,options:[]}},watch:{item(e){e&&this.$emit("update",e.value)}},methods:{filterFn(e,t,l){t((()=>{this.loadData(e)}))},loadData(e=""){let t={search_text:e,per_page:20};this.ext&&(t=Object.assign({search_text:e,per_page:20},this.ext)),this.$utils.postCallPgMethod({method:this.pgMethod,params:t}).subscribe((e=>{e.ok&&(e.result||(e.result=[]),this.existIds&&Array.isArray(this.existIds)&&(e.result=e.result.filter((e=>!this.existIds.includes(e.id)))),this.options=e.result.map((e=>{let t=e[this.title?this.title:"title"];return c().isFunction(this.title)&&(t=this.title(e)),t||(t="неверно указан параметр для label"),{label:t,value:e}})))}))}},mounted(){this.loadData()}};fl.render=wl;const bl=fl;j()(fl,"components",{QSelect:z.Z,QItem:g.Z,QItemSection:w.Z});const yl={key:0},kl={class:"text-grey-8 q-gutter-xs"},vl=(0,s.Uk)("Редактировать"),_l=(0,s.Uk)("Удалить"),ql=(0,s.Wm)("span",{class:"q-ml-sm"},"Добавление",-1),xl={class:"row q-col-gutter-md q-mt-sm"},jl={class:"row q-col-gutter-md q-mt-sm"},Wl=(0,s.Wm)("span",{class:"q-ml-sm"},"Удалить?",-1);function Zl(e,t,l,o,a,i){const n=(0,s.up)("q-space"),r=(0,s.up)("q-btn"),d=(0,s.up)("q-bar"),u=(0,s.up)("comp-stat-img-src"),c=(0,s.up)("q-avatar"),m=(0,s.up)("q-item-section"),p=(0,s.up)("q-item-label"),h=(0,s.up)("q-tooltip"),g=(0,s.up)("q-item"),w=(0,s.up)("q-list"),f=(0,s.up)("q-card-section"),b=(0,s.up)("comp-search-ref-in-list-widget"),y=(0,s.up)("comp-fld"),k=(0,s.up)("q-card-actions"),v=(0,s.up)("q-card"),_=(0,s.up)("q-dialog"),q=(0,s.Q2)("close-popup");return"new"!=l.id?((0,s.wg)(),(0,s.j4)("div",yl,[(0,s.Wm)(d,{class:"bg-secondary text-white shadow-2"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",null,(0,s.zw)(l.label),1),(0,s.Wm)(n),a.isShowList&&a.list.length>0?((0,s.wg)(),(0,s.j4)(r,{key:0,dense:"",flat:"",icon:"expand_less",onClick:t[1]||(t[1]=e=>a.isShowList=!1)})):(0,s.kq)("",!0),!a.isShowList&&a.list.length>0?((0,s.wg)(),(0,s.j4)(r,{key:1,dense:"",flat:"",icon:"expand_more",onClick:t[2]||(t[2]=e=>a.isShowList=!0)})):(0,s.kq)("",!0),l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:2,dense:"",flat:"",icon:"add",onClick:t[3]||(t[3]=e=>a.isShowAddDialog=!0)}))])),_:1}),a.isShowList?((0,s.wg)(),(0,s.j4)(w,{key:0,bordered:"",separator:"",dense:l.dense},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(i.filteredList,(t=>((0,s.wg)(),(0,s.j4)(g,{key:t.id},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{avatar:"",onClick:s=>e.$router.push(`${l.tableDependRoute}/${t[l.tableDependFldName]}`)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{rounded:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{src:i.avatar(t)},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"]),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(t.options.title[i.tableDependFldTitle]),1)])),_:2},1024),(0,s.WI)(e.$slots,"default",{item:t})])),_:2},1024),l.readonly?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(m,{key:0,side:""},{default:(0,s.w5)((()=>[(0,s.Wm)("div",kl,[l.flds?((0,s.wg)(),(0,s.j4)(r,{key:0,flat:"",round:"",icon:"edit",size:"sm",onClick:e=>i.showEditDialog(t)},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[vl])),_:1})])),_:2},1032,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(r,{flat:"",round:"",icon:"delete",size:"sm",onClick:e=>i.showDeleteDialog(t.id)},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[_l])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024))])),_:2},1024)))),128))])),_:1},8,["dense"])):(0,s.kq)("",!0),(0,s.Wm)(_,{modelValue:a.isShowAddDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>a.isShowAddDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"row items-center"},{default:(0,s.w5)((()=>[ql])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{label:"Поиск","pg-method":l.tableDependName+"_list",onUpdate:t[4]||(t[4]=e=>a.selectedForAdd=e),ext:l.searchExt},null,8,["pg-method","ext"]),l.flds?((0,s.wg)(!0),(0,s.j4)(s.HY,{key:0},(0,s.Ko)(l.flds,(e=>((0,s.wg)(),(0,s.j4)("div",xl,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.j4)(y,{key:e.name,fld:a.localItem[e.name],type:e.type,onUpdate:t=>a.localItem[e.name]=t,label:e.label,selectOptions:e.selectOptions?e.selectOptions():[],columnClass:e.columnClass},null,8,["fld","type","onUpdate","label","selectOptions","columnClass"])))),128))])))),256)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(k,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Отмена"},null,512),[[q]]),(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Добавить",onClick:i.add},null,8,["onClick"]),[[q]]),l.hideCreateNew?(0,s.kq)("",!0):(0,s.wy)(((0,s.wg)(),(0,s.j4)(r,{key:0,flat:"",label:"Создать",onClick:i.openNew,class:"q-ml-md"},null,8,["onClick"])),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(_,{modelValue:a.isShowEditDialog,"onUpdate:modelValue":t[6]||(t[6]=e=>a.isShowEditDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[l.flds&&a.selectedForEdit?((0,s.wg)(!0),(0,s.j4)(s.HY,{key:0},(0,s.Ko)(l.flds,(e=>((0,s.wg)(),(0,s.j4)("div",jl,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.j4)(y,{key:e.name,fld:a.selectedForEdit[e.name],type:e.type,onUpdate:t=>a.selectedForEdit[e.name]=t,label:e.label,selectOptions:e.selectOptions?e.selectOptions():[],columnClass:e.columnClass},null,8,["fld","type","onUpdate","label","selectOptions","columnClass"])))),128))])))),256)):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(k,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Отмена"},null,512),[[q]]),(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Ok",onClick:i.save},null,8,["onClick"]),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(_,{modelValue:a.isShowDeleteDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>a.isShowDeleteDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{rounded:"",icon:"warning",color:"warning","text-color":"white"}),Wl])),_:1}),(0,s.Wm)(k,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Отмена"},null,512),[[q]]),(0,s.wy)((0,s.Wm)(r,{flat:"",label:"Удалить",onClick:i.remove},null,8,["onClick"]),[[q]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])):(0,s.kq)("",!0)}const Sl={props:["id","tableIdName","tableIdFldName","tableDependName","tableDependFldName","tableDependRoute","linkTableName","label","avatarSrc","hideCreateNew","flds","readonly","searchExt","filterListFn","dense"],computed:{tableDependFldTitle(){return this.tableDependFldName.split("_id")[0]+"_title"},filteredList(){return this.filterListFn?this.list.filter(this.filterListFn):this.list}},data(){return{isShowList:!0,list:[],localItem:{},isShowAddDialog:!1,isShowDeleteDialog:!1,selectedForDeleteId:null,selectedForAdd:null,isShowEditDialog:!1,selectedForEdit:null}},methods:{avatar(e){let t=this.tableDependFldName.split("_id")[0];return e.options.title[t+"_avatar"]||this.avatarSrc||"https://www.svgrepo.com/show/95333/avatar.svg"},showDeleteDialog(e){this.selectedForDeleteId=e,this.isShowDeleteDialog=!0},showEditDialog(e){this.isShowEditDialog=!0,this.selectedForEdit=e},add(){if(!this.selectedForAdd)return;let e={id:-1};e[this.tableIdFldName]=+this.id,e[this.tableDependFldName]=this.selectedForAdd.id,this.$utils.postCallPgMethod({method:`${this.linkTableName}_update`,params:Object.assign(e,this.localItem)}).subscribe((e=>{e.ok&&(this.reload(),this.$emit("reload"))}))},remove(){this.$utils.postCallPgMethod({method:`${this.linkTableName}_update`,params:{id:this.selectedForDeleteId,deleted:!0}}).subscribe((e=>{e.ok&&(this.reload(),this.$emit("reload"))}))},reload(){let e={};e[this.tableIdFldName]=+this.id,e.order_by="id",this.$utils.postCallPgMethod({method:`${this.linkTableName}_list`,params:e}).subscribe((e=>{e.ok&&(this.list=e.result)}))},save(){this.$utils.postCallPgMethod({method:`${this.linkTableName}_update`,params:this.selectedForEdit}).subscribe((e=>{e.ok&&(this.isShowEditDialog=!1,this.selectedForEdit=null,this.reload(),this.$emit("reload"))}))},openNew(){window.open(`${this.tableDependRoute}/new`,"_blank")}},mounted(){this.reload(),this.flds&&c().flattenDeep(this.flds).map((e=>{this.localItem[e.name]="checkbox"!==e.type&&null}))}};Sl.render=Zl;const Ql=Sl;function Cl(e,t,l,o,a,i){const n=(0,s.up)("q-tooltip"),r=(0,s.up)("q-btn"),d=(0,s.up)("q-uploader"),u=(0,s.up)("q-card-section"),c=(0,s.up)("q-card"),m=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.j4)("div",null,[l.is_btn_with_label?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,icon:a.iconName,flat:"",round:"",size:i.btnSize,onClick:t[1]||(t[1]=e=>a.isOpenUpload=!0)},{default:(0,s.w5)((()=>[l.tooltip?((0,s.wg)(),(0,s.j4)(n,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(l.tooltip),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["icon","size"])),l.is_btn_with_label?((0,s.wg)(),(0,s.j4)(r,{key:1,icon:a.iconName,outline:"",label:l.label,color:i.btnColor,size:i.btnSize,onClick:t[2]||(t[2]=e=>a.isOpenUpload=!0)},{default:(0,s.w5)((()=>[l.tooltip?((0,s.wg)(),(0,s.j4)(n,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)((0,s.zw)(l.tooltip),1)])),_:1})):(0,s.kq)("",!0)])),_:1},8,["icon","label","color","size"])):(0,s.kq)("",!0),(0,s.Wm)(m,{modelValue:a.isOpenUpload,"onUpdate:modelValue":t[3]||(t[3]=e=>a.isOpenUpload=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{ref:"uploader",label:a.labelName,"auto-upload":"",filter:i.checkFileType,url:i.uploadUrl,headers:i.headers,onUploaded:i.uploaded,onFailed:i.failed},null,8,["label","filter","url","headers","onUploaded","onFailed"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}j()(Sl,"components",{QBar:Je.Z,QSpace:Xe.Z,QBtn:b.Z,QList:h.Z,QItem:g.Z,QItemSection:w.Z,QAvatar:ue.Z,QItemLabel:f.Z,QTooltip:ie.Z,QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QCardActions:ce.Z}),j()(Sl,"directives",{ClosePopup:$.Z});const Ul={props:["url","fileExt","icon","tooltip","label","is_btn_with_label","size","color","notifyResultFunc"],computed:{uploadUrl(){return`${this.$config.apiUrl()}/api/${this.url}`},headers:function(){const e=localStorage.getItem(this.$config.appName);return[{name:"Auth-token",value:e}]},btnSize(){return this.size||"sm"},btnColor(){return this.color||"primary"}},data(){return{isOpenUpload:!1,iconName:"cloud_upload",labelName:"Выберите файл для загрузки"}},methods:{checkFileType(e){if(this.fileExt&&this.fileExt.length>0){let t=e.filter((e=>this.fileExt.filter((t=>e.name.includes(`.${t}`))).length>0));return 0===t.length&&this.$q.notify({type:"negative",message:`файл должен иметь расширение ${this.fileExt}`}),t}return e},uploaded({xhr:{response:e}}){const t=JSON.parse(e);t.ok?(this.$refs.uploader.reset(),this.isOpenUpload=!1,this.$emit("result",t.result),this.$emit("reloadList"),this.$q.notify({color:"positive",position:"bottom",message:this.notifyResultFunc?this.notifyResultFunc(t.result):t.result})):this.$q.notify({color:"negative",position:"bottom",message:t.message})},failed(e){let t="ошибка загрузки";if(e.xhr&&e.xhr.responseText){let l=JSON.parse(e.xhr.responseText);l.message&&(t=l.message)}this.$q.notify({color:"negative",position:"bottom",message:t})}},mounted(){this.icon&&(this.iconName=this.icon),this.label&&(this.labelName=this.label)}};Ul.render=Cl;const Dl=Ul;j()(Ul,"components",{QBtn:b.Z,QTooltip:ie.Z,QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QUploader:et.Z});const $l={class:"q-ml-sm"};function Il(e,t,l,o,a,i){const n=(0,s.up)("q-avatar"),r=(0,s.up)("q-card-section"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-card-actions"),c=(0,s.up)("q-card"),m=(0,s.up)("q-dialog"),p=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(m,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>a.isShowDialog=e),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"row items-center"},{default:(0,s.w5)((()=>[l.icon?((0,s.wg)(),(0,s.j4)(n,{key:0,icon:l.icon,color:"primary","text-color":"white"},null,8,["icon"])):(0,s.kq)("",!0),(0,s.Wm)("span",$l,(0,s.zw)(l.label),1)])),_:1}),(0,s.Wm)(u,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(d,{flat:"",label:"Отмена",color:"primary"},null,512),[[p]]),(0,s.wy)((0,s.Wm)(d,{flat:"",label:"Ок",color:"primary",onClick:t[1]||(t[1]=t=>e.$emit("update",a.item))},null,512),[[p]])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const Fl={props:["label","icon"],data(){return{isShowDialog:!1,item:null}},methods:{open(e){this.isShowDialog=!0,this.item=e}}};Fl.render=Il;const Vl=Fl;function Tl(e,t,l,o,a,i){const n=(0,s.up)("q-img");return(0,s.wg)(),(0,s.j4)(n,{src:i.imgUrl,onError:t[1]||(t[1]=t=>e.$emit("error",t))},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3},8,["src"])}j()(Fl,"components",{QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QAvatar:ue.Z,QCardActions:ce.Z,QBtn:b.Z}),j()(Fl,"directives",{ClosePopup:$.Z});const Ll={props:["src"],computed:{imgUrl:function(){return this.src?this.src.includes("http")||this.src.startsWith("image")?this.src:`${this.$config.apiUrl()}${this.src}`:"https://www.foot.com/wp-content/uploads/2017/03/placeholder.gif"}}};Ll.render=Tl;const Nl=Ll;j()(Ll,"components",{QImg:yt.Z});const Pl=(0,s.Wm)("div",{class:"text-h6"},"Создать задачу",-1),Ml={class:"row q-col-gutter-md q-mb-sm"},zl={class:"col-12"},Ol={class:"row q-col-gutter-md q-mb-sm"},Rl={class:"col-xs-12 col-sm-6 col-md-6"},Al={class:"col-xs-12 col-sm-6 col-md-6"},Bl={class:"row q-col-gutter-md q-mb-sm"},Yl={class:"col-12"};function El(e,t,l,o,a,i){const n=(0,s.up)("comp-fld-ref-search"),r=(0,s.up)("comp-fld-user-search"),d=(0,s.up)("comp-fld-date-time"),u=(0,s.up)("q-input"),c=(0,s.up)("q-card-section"),m=(0,s.up)("q-btn"),p=(0,s.up)("q-card-actions"),h=(0,s.up)("q-card"),g=(0,s.up)("q-dialog"),w=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(g,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>a.isShowDialog=e),onHide:i.hide},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[Pl,(0,s.Wm)("div",Ml,[(0,s.Wm)("div",zl,[(0,s.Wm)(n,{label:"Тип задачи",item:"",pgMethod:"task_type_list",onUpdate:i.updateTaskType,ext:{table_name:l.table_name}},null,8,["onUpdate","ext"])])]),(0,s.Wm)("div",Ol,[(0,s.Wm)("div",Rl,[(0,s.Wm)(r,{label:"Ответственный",user:"",onUpdate:t[1]||(t[1]=e=>a.task.executor_id=e.id)})]),(0,s.Wm)("div",Al,[(0,s.Wm)(d,{label:"Deadline",onUpdate:t[2]||(t[2]=e=>a.task.deadline=e)})])]),(0,s.Wm)("div",Bl,[(0,s.Wm)("div",Yl,[(0,s.Wm)(u,{outlined:"",label:"Текст",modelValue:a.task.content,"onUpdate:modelValue":t[3]||(t[3]=e=>a.task.content=e),autogrow:""},null,8,["modelValue"])])])])),_:1}),(0,s.Wm)(p,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(m,{flat:"",label:"Отмена"},null,512),[[w]]),(0,s.Wm)(m,{flat:"",label:"OK",color:"primary",onClick:i.done},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}const Hl={props:["table_id","table_name"],data(){return{isShowDialog:!1,task:{}}},methods:{open(){this.isShowDialog=!0},hide(){},updateTaskType({id:e,item:t}){this.task.task_type_id=e;const l=t.item.table_name;l?(this.task.table_name=l,this.task.table_id=+this.table_id):(this.task.table_name=null,this.task.table_id=null)},done(){let e=!1;const t=[{fld:"task_type_id",title:"Тип задачи"},{fld:"deadline",title:"Deadline"},{fld:"executor_id",title:"Ответственный"}];if(t.map((t=>{this.task[t.fld]||(e=!0,this.$q.notify({message:`Поле "${t.title}" не заполнено`,type:"negative"}))})),e)return;let l=Object.assign({id:-1},this.task);this.$utils.postCallPgMethod({method:"task_update",params:l}).subscribe((e=>{e.ok&&(this.isShowDialog=!1,this.task={},this.$emit("updated"))}))}}};Hl.render=El;const Kl=Hl;j()(Hl,"components",{QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QInput:k.Z,QCardActions:ce.Z,QBtn:b.Z}),j()(Hl,"directives",{ClosePopup:$.Z});const Gl={class:"text-h6"};function Jl(e,t,l,o,a,i){const n=(0,s.up)("q-card-section"),r=(0,s.up)("q-slider"),d=(0,s.up)("q-input"),u=(0,s.up)("q-btn"),c=(0,s.up)("q-card-actions"),m=(0,s.up)("q-card"),p=(0,s.up)("q-dialog"),h=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(p,{modelValue:a.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>a.isShowDialog=e),onHide:i.hide},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{style:{width:"700px","max-width":"80vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)("div",Gl,(0,s.zw)(a.task.task_type_title),1)])),_:1}),(0,s.Wm)(n,{class:"q-mt-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{modelValue:a.success_rate,"onUpdate:modelValue":t[1]||(t[1]=e=>a.success_rate=e),min:0,max:10,step:1,snap:"","label-always":"","label-value":`Оценка успешности: ${a.success_rate}`,markers:"",color:"primary"},null,8,["modelValue","label-value"])])),_:1}),(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{outlined:"",label:"Результат",modelValue:a.taskResult,"onUpdate:modelValue":t[2]||(t[2]=e=>a.taskResult=e),autogrow:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(c,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(u,{flat:"",label:"Отмена"},null,512),[[h]]),(0,s.Wm)(u,{flat:"",label:"OK",color:"primary",onClick:i.done},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}const Xl={data(){return{isShowDialog:!1,task:{},success_rate:0,taskResult:null}},methods:{open(e){this.task=e,this.isShowDialog=!0},hide(){this.success_rate=0,this.taskResult=null},done(){this.$utils.postCallPgMethod({method:"task_action_to_finished",params:{id:this.task.id,result:this.taskResult,success_rate:this.success_rate}}).subscribe((e=>{e.ok&&(this.$emit("taskFinished",this.task.id),this.isShowDialog=!1)}))}}};var es=l(62064);Xl.render=Jl;const ts=Xl;j()(Xl,"components",{QDialog:ne.Z,QCard:re.Z,QCardSection:de.Z,QSlider:es.Z,QInput:k.Z,QCardActions:ce.Z,QBtn:b.Z}),j()(Xl,"directives",{ClosePopup:$.Z});const ls={class:"row justify-center"},ss=(0,s.Wm)("img",{src:"https://image.flaticon.com/icons/svg/3081/3081489.svg"},null,-1),os=(0,s.Uk)("создать чат"),as=(0,s.Wm)("div",null,"чат",-1);function is(e,t,l,o,a,i){const n=(0,s.up)("q-avatar"),r=(0,s.up)("q-tooltip"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-icon"),c=(0,s.up)("q-bar"),m=(0,s.up)("q-chat-message"),p=(0,s.up)("q-card-section"),h=(0,s.up)("q-scroll-area"),g=(0,s.up)("q-input"),w=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)("div",ls,[a.isShowNewChatBtn?((0,s.wg)(),(0,s.j4)(d,{key:0,round:"",color:"secondary",onClick:i.createChat},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{size:"52px"},{default:(0,s.w5)((()=>[ss])),_:1}),(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[os])),_:1})])),_:1},8,["onClick"])):(0,s.kq)("",!0),a.chat?((0,s.wg)(),(0,s.j4)(w,{key:1,style:{width:"100%","max-width":"400px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"chat"}),as])),_:1}),(0,s.Wm)(h,{ref:"chatScroll","thumb-style":a.thumbStyle,"bar-style":a.barStyle,style:{height:"400px","max-width":"400px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(a.msgList,(t=>((0,s.wg)(),(0,s.j4)(m,{key:t.id,name:t.fullname,avatar:t.avatar,text:[t.title],stamp:e.$utils.formatPgDateTime(t.updated_at),sent:""},null,8,["name","avatar","text","stamp"])))),128))])),_:1})])),_:1},8,["thumb-style","bar-style"]),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(g,{label:"написать сообщение",outlined:"",modelValue:a.newMsg,"onUpdate:modelValue":t[1]||(t[1]=e=>a.newMsg=e),autogrow:""},{append:(0,s.w5)((()=>[a.newMsg&&""!==a.newMsg?((0,s.wg)(),(0,s.j4)(u,{key:0,name:"send",onClick:i.send,class:"cursor-pointer"},null,8,["onClick"])):(0,s.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,s.kq)("",!0)])}const ns={props:["table_name","table_id"],data(){return{chat:null,isShowNewChatBtn:!1,msgList:[],newMsg:null,thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"9px",opacity:.2}}},methods:{createChat(){this.isShowNewChatBtn=!1,this.$utils.postCallPgMethod({method:"chat_update",params:{id:-1,table_name:this.table_name,table_id:this.table_id}}).subscribe((e=>{e.ok&&(this.reload(),this.newMsg=null)}))},send(){this.$utils.postCallPgMethod({method:"chat_message_update",params:{id:-1,chat_id:this.chat.id,title:this.newMsg}}).subscribe((e=>{e.ok&&(this.reload(),this.newMsg=null)}))},reload(){this.$utils.postCallPgMethod({method:"chat_for_table_id",params:{table_name:this.table_name,table_id:this.table_id},isShowError:!1}).subscribe((e=>{e.ok&&(this.isShowNewChatBtn=!1,e.result.length>0&&(this.chat=e.result[0],this.msgList=e.result[0].message_list||[],this.msgList=this.msgList.map((e=>(e.avatar?(e.avatar=`${this.$config.apiUrl()}${e.avatar}`,console.log("v.avatar:",e.avatar)):e.avatar="https://www.svgrepo.com/show/95333/avatar.svg",e))),this.$nextTick((()=>{const e=this.$refs.chatScroll,t=e.getScrollTarget(),l=100;e.setScrollPosition(t.scrollHeight,l)}))))}))}},mounted(){this.reload(),setTimeout((()=>{this.chat||(this.isShowNewChatBtn=!0)}),400)}};var rs=l(47704),ds=l(40629);ns.render=is;const us=ns;j()(ns,"components",{QBtn:b.Z,QAvatar:ue.Z,QTooltip:ie.Z,QCard:re.Z,QBar:Je.Z,QIcon:v.Z,QScrollArea:rs.Z,QCardSection:de.Z,QChatMessage:ds.Z,QInput:k.Z});const cs=e=>{e.component("comp-doc-list",W),e.component("comp-item-dropdown-btn",I),e.component("comp-fld",R),e.component("comp-fld-user-search",E),e.component("comp-fld-user-multiple-search",$e),e.component("comp-breadcrumb",ee),e.component("comp-delete-btn-in-list",me),e.component("comp-fld-date",ye),e.component("comp-fld-date-time",je),e.component("comp-item-btn-save",Qe),e.component("comp-fld-ref-search",Te),e.component("comp-fld-select-city",Me),e.component("comp-fld-contact",Re),e.component("comp-fld-files",tt),e.component("comp-fld-img",dt),e.component("comp-fld-address",Zt),e.component("comp-fld-img-list",kt),e.component("comp-dadata-suggestion",Rt),e.component("comp-dadata-address",el),e.component("comp-dadata-address-dialog",sl),e.component("comp-dadata-company",hl),e.component("comp-search-ref-in-list-widget",bl),e.component("comp-link-list-widget",Ql),e.component("comp-stat-img-src",Nl),e.component("comp-dialog-confirm",Vl),e.component("comp-dialog-task-add",Kl),e.component("comp-dialog-task-done",ts),e.component("comp-chat",us),e.component("comp-file-upload",Dl)},ms=({app:e})=>{cs(e)}},44926:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var s=l(91589);const o=async({app:e})=>{e.config.globalProperties.$utils=s.Z}},46700:(e,t,l)=>{var s={"./af":5809,"./af.js":5809,"./ar":46069,"./ar-dz":70481,"./ar-dz.js":70481,"./ar-kw":93994,"./ar-kw.js":93994,"./ar-ly":33312,"./ar-ly.js":33312,"./ar-ma":90239,"./ar-ma.js":90239,"./ar-sa":31863,"./ar-sa.js":31863,"./ar-tn":19607,"./ar-tn.js":19607,"./ar.js":46069,"./az":69281,"./az.js":69281,"./be":29945,"./be.js":29945,"./bg":59384,"./bg.js":59384,"./bm":21476,"./bm.js":21476,"./bn":43345,"./bn-bd":70216,"./bn-bd.js":70216,"./bn.js":43345,"./bo":81713,"./bo.js":81713,"./br":19655,"./br.js":19655,"./bs":87296,"./bs.js":87296,"./ca":43049,"./ca.js":43049,"./cs":62722,"./cs.js":62722,"./cv":98039,"./cv.js":98039,"./cy":95563,"./cy.js":95563,"./da":31960,"./da.js":31960,"./de":67533,"./de-at":76674,"./de-at.js":76674,"./de-ch":17732,"./de-ch.js":17732,"./de.js":67533,"./dv":78343,"./dv.js":78343,"./el":37004,"./el.js":37004,"./en-au":32517,"./en-au.js":32517,"./en-ca":84929,"./en-ca.js":84929,"./en-gb":99722,"./en-gb.js":99722,"./en-ie":96923,"./en-ie.js":96923,"./en-il":68050,"./en-il.js":68050,"./en-in":99624,"./en-in.js":99624,"./en-nz":70540,"./en-nz.js":70540,"./en-sg":14375,"./en-sg.js":14375,"./eo":10040,"./eo.js":10040,"./es":99720,"./es-do":25595,"./es-do.js":25595,"./es-mx":10180,"./es-mx.js":10180,"./es-us":61563,"./es-us.js":61563,"./es.js":99720,"./et":9217,"./et.js":9217,"./eu":39474,"./eu.js":39474,"./fa":85243,"./fa.js":85243,"./fi":57645,"./fi.js":57645,"./fil":55350,"./fil.js":55350,"./fo":75622,"./fo.js":75622,"./fr":91467,"./fr-ca":53439,"./fr-ca.js":53439,"./fr-ch":14335,"./fr-ch.js":14335,"./fr.js":91467,"./fy":86026,"./fy.js":86026,"./ga":32969,"./ga.js":32969,"./gd":21347,"./gd.js":21347,"./gl":11085,"./gl.js":11085,"./gom-deva":904,"./gom-deva.js":904,"./gom-latn":69597,"./gom-latn.js":69597,"./gu":28705,"./gu.js":28705,"./he":69128,"./he.js":69128,"./hi":92821,"./hi.js":92821,"./hr":9002,"./hr.js":9002,"./hu":94814,"./hu.js":94814,"./hy-am":30658,"./hy-am.js":30658,"./id":29344,"./id.js":29344,"./is":28204,"./is.js":28204,"./it":70376,"./it-ch":81549,"./it-ch.js":81549,"./it.js":70376,"./ja":69293,"./ja.js":69293,"./jv":96401,"./jv.js":96401,"./ka":60482,"./ka.js":60482,"./kk":87329,"./kk.js":87329,"./km":44241,"./km.js":44241,"./kn":23566,"./kn.js":23566,"./ko":52742,"./ko.js":52742,"./ku":92915,"./ku.js":92915,"./ky":86846,"./ky.js":86846,"./lb":44959,"./lb.js":44959,"./lo":82188,"./lo.js":82188,"./lt":58967,"./lt.js":58967,"./lv":41245,"./lv.js":41245,"./me":90751,"./me.js":90751,"./mi":57501,"./mi.js":57501,"./mk":11643,"./mk.js":11643,"./ml":15597,"./ml.js":15597,"./mn":67612,"./mn.js":67612,"./mr":19065,"./mr.js":19065,"./ms":84703,"./ms-my":84645,"./ms-my.js":84645,"./ms.js":84703,"./mt":64365,"./mt.js":64365,"./my":83788,"./my.js":83788,"./nb":57357,"./nb.js":57357,"./ne":99109,"./ne.js":99109,"./nl":63746,"./nl-be":31985,"./nl-be.js":31985,"./nl.js":63746,"./nn":27175,"./nn.js":27175,"./oc-lnc":70566,"./oc-lnc.js":70566,"./pa-in":32733,"./pa-in.js":32733,"./pl":182,"./pl.js":182,"./pt":505,"./pt-br":17839,"./pt-br.js":17839,"./pt.js":505,"./ro":39578,"./ro.js":39578,"./ru":32328,"./ru.js":32328,"./sd":641,"./sd.js":641,"./se":51758,"./se.js":51758,"./si":36680,"./si.js":36680,"./sk":25016,"./sk.js":25016,"./sl":7424,"./sl.js":7424,"./sq":88635,"./sq.js":88635,"./sr":49038,"./sr-cyrl":73716,"./sr-cyrl.js":73716,"./sr.js":49038,"./ss":64771,"./ss.js":64771,"./sv":3517,"./sv.js":3517,"./sw":39419,"./sw.js":39419,"./ta":55959,"./ta.js":55959,"./te":21739,"./te.js":21739,"./tet":22264,"./tet.js":22264,"./tg":94792,"./tg.js":94792,"./th":88328,"./th.js":88328,"./tk":60702,"./tk.js":60702,"./tl-ph":57814,"./tl-ph.js":57814,"./tlh":10797,"./tlh.js":10797,"./tr":16691,"./tr.js":16691,"./tzl":76891,"./tzl.js":76891,"./tzm":16362,"./tzm-latn":37855,"./tzm-latn.js":37855,"./tzm.js":16362,"./ug-cn":77606,"./ug-cn.js":77606,"./uk":30513,"./uk.js":30513,"./ur":43803,"./ur.js":43803,"./uz":60344,"./uz-latn":8957,"./uz-latn.js":8957,"./uz.js":60344,"./vi":70003,"./vi.js":70003,"./x-pseudo":8842,"./x-pseudo.js":8842,"./yo":62083,"./yo.js":62083,"./zh-cn":84536,"./zh-cn.js":84536,"./zh-hk":92475,"./zh-hk.js":92475,"./zh-mo":67593,"./zh-mo.js":67593,"./zh-tw":4746,"./zh-tw.js":4746};function o(e){var t=a(e);return l(t)}function a(e){if(!l.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=a,e.exports=o,o.id=46700}},t={};function l(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(a.exports,a,a.exports,l),a.loaded=!0,a.exports}l.m=e,(()=>{var e=[];l.O=(t,s,o,a)=>{if(!s){var i=1/0;for(u=0;u<e.length;u++){for(var[s,o,a]=e[u],n=!0,r=0;r<s.length;r++)(!1&a||i>=a)&&Object.keys(l.O).every((e=>l.O[e](s[r])))?s.splice(r--,1):(n=!1,a<i&&(i=a));if(n){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,o,a]}})(),(()=>{l.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return l.d(t,{a:t}),t}})(),(()=>{l.d=(e,t)=>{for(var s in t)l.o(t,s)&&!l.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,s)=>(l.f[s](e,t),t)),[]))})(),(()=>{l.u=e=>"js/"+e+"."+{31:"4f2d1134",97:"9110bb04",175:"d84d5320",401:"c35333f9",529:"0d83e0f2",628:"55beebcb",651:"28fee789",721:"ac20f8a0",879:"75b7a038"}[e]+".js"})(),(()=>{l.miniCssF=e=>"css/vendor.d563f5dd.css"})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="CompanyName:";l.l=(s,o,a,i)=>{if(e[s])e[s].push(o);else{var n,r;if(void 0!==a)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+a){n=c;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,l.nc&&n.setAttribute("nonce",l.nc),n.setAttribute("data-webpack",t+a),n.src=s),e[s]=[o];var m=(t,l)=>{n.onerror=n.onload=null,clearTimeout(p);var o=e[s];if(delete e[s],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach((e=>e(l))),t)return t(l)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{l.p="/static/"})(),(()=>{var e={143:0};l.f.j=(t,s)=>{var o=l.o(e,t)?e[t]:void 0;if(0!==o)if(o)s.push(o[2]);else{var a=new Promise(((l,s)=>o=e[t]=[l,s]));s.push(o[2]=a);var i=l.p+l.u(t),n=new Error,r=s=>{if(l.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;n.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",n.name="ChunkLoadError",n.type=a,n.request=i,o[1](n)}};l.l(i,r,"chunk-"+t,t)}},l.O.j=t=>0===e[t];var t=(t,s)=>{var o,a,[i,n,r]=s,d=0;for(o in n)l.o(n,o)&&(l.m[o]=n[o]);if(r)var u=r(l);for(t&&t(s);d<i.length;d++)a=i[d],l.o(e,a)&&e[a]&&e[a][0](),e[i[d]]=0;return l.O(u)},s=self["webpackChunkCompanyName"]=self["webpackChunkCompanyName"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=l.O(void 0,[736],(()=>l(41204)));s=l.O(s)})();